<div id="article_content" class="article_content clearfix">
                                                <div class="article-copyright">
                <span class="creativecommons">
                <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">
                    </a>
            <span>
               <a href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener"> </span>
               <div class="article-source-link2222">
                    <a href="https://blog.csdn.net/ziwoods/article/details/80569063"></a>
                </div>
            </span>
                    </div>
                                                    <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css">
                                        <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css">
                <div class="htmledit_views" id="content_views">
                                            <p>执行mysql语句 DO后是需要执行的sql</p><p>每天凌晨1点执行</p><pre><code class="language-sql hljs"><ol class="hljs-ln"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">EVENT</span> <span class="hljs-keyword">IF</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> temp_event   </div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-keyword">ON</span> SCHEDULE EVERY <span class="hljs-number">1</span> <span class="hljs-keyword">DAY</span> STARTS <span class="hljs-keyword">DATE_ADD</span>(<span class="hljs-keyword">DATE_ADD</span>(<span class="hljs-keyword">CURDATE</span>(), <span class="hljs-built_in">INTERVAL</span> <span class="hljs-number">1</span> <span class="hljs-keyword">DAY</span>), <span class="hljs-built_in">INTERVAL</span> <span class="hljs-number">1</span> <span class="hljs-keyword">HOUR</span>)   </div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-keyword">ON</span> COMPLETION <span class="hljs-keyword">PRESERVE</span> <span class="hljs-keyword">ENABLE</span>   </div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-keyword">DO</span> <span class="hljs-keyword">update</span> <span class="hljs-keyword">users</span> <span class="hljs-keyword">set</span> support=<span class="hljs-number">0</span> <span class="hljs-keyword">where</span> support=<span class="hljs-number">1</span>;</div></div></li></ol></code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre><p>每隔一分钟执行</p><pre><code class="language-sql hljs"><ol class="hljs-ln"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">event</span> <span class="hljs-keyword">IF</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> temp_event <span class="hljs-keyword">ON</span> SCHEDULE EVERY <span class="hljs-number">1</span> <span class="hljs-keyword">MINUTE</span>   </div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-keyword">ON</span> COMPLETION <span class="hljs-keyword">PRESERVE</span>   </div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-keyword">DO</span> <span class="hljs-keyword">update</span> <span class="hljs-keyword">users</span> <span class="hljs-keyword">set</span> support=<span class="hljs-number">0</span> <span class="hljs-keyword">where</span> support=<span class="hljs-number">1</span>;</div></div></li></ol></code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre><p>查看定时任务</p><pre><code class="language-sql hljs"> <span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> information_schema.events; </code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre><p>关闭定时任务</p><pre><code class="language-sql hljs"><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">event</span> temp_event;</code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre><br>                                    </div>
                    </div>