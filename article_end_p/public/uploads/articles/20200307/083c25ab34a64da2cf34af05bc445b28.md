<div id="article_content" class="article_content clearfix">
            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-833878f763.css">
                                        <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-833878f763.css">
                <div class="htmledit_views" id="content_views">
                                            
<span style="font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">pm2 是一个带有负载均衡功能的Node应用的进程管理器.当你要把你的独立代码利用全部的服务器上的所有CPU,并保证进程永远都活着,0秒的重载, PM2是完美的,下面我们来看pm2常用的命令用法介绍吧。</span><br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<span style="font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">PM2 （github上的源码）是开源的基于Nodejs的进程管理器，包括守护进程，监控，日志的一整套完整的功能，基本是Nodejs应用程序不二的守护进程选择，事实上它并不仅仅可以启动Nodejs的程序，只要是一般的脚本的程序它同样可以胜任。</span><br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<span style="font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">以下是pm2常用的命令行</span><br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<span style="font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">$ pm2 start app.js &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# 启动app.js应用程序</span><br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<span style="font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">$ pm2 start app.js -i 4 &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px; color:rgb(76,51,229)"><span style="word-wrap:break-word">#
 cluster mode 模式启动4个app.js的应用实例&nbsp;</span></span><span style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px; color:rgb(76,51,229)"><span style="word-wrap:break-word">&nbsp; &nbsp; # 4个应用程序会自动进行负载均衡</span></span><br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<span style="font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">$ pm2 start app.js --name="api" # 启动应用程序并命名为 "api"</span><br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<span style="font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">$ pm2 start app.js</span><span style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px; color:rgb(76,51,229)"><span style="word-wrap:break-word">&nbsp;--watch
 &nbsp; &nbsp; &nbsp;# 当文件变化时自动重启应用</span></span><br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<span style="font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">$ pm2 start script.sh &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px; color:rgb(76,51,229)"><span style="word-wrap:break-word">&nbsp;#
 启动 bash 脚本</span></span><br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<span style="font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">$ pm2 list &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px; color:rgb(76,51,229)"><span style="word-wrap:break-word">#
 列表 PM2 启动的所有的应用程序</span></span><br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<span style="font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">$ pm2 monit &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # 显示每个应用程序的CPU和内存占用情况</span><br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<span style="font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">$ pm2 show [app-name] &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px; color:rgb(76,51,229)"><span style="word-wrap:break-word">#
 显示应用程序的所有信息</span></span><br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<span style="font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">$ pm2 logs &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px; color:rgb(76,51,229)"><span style="word-wrap:break-word">#
 显示所有应用程序的日志</span></span><br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<span style="font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">$ pm2 logs [app-name] &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # 显示指定应用程序的日志</span><br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<span style="font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">$ pm2 flush</span><br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<span style="font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">$ pm2 stop all &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# 停止所有的应用程序</span><br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<span style="font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">$ pm2 stop 0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px; color:rgb(76,51,229)"><span style="word-wrap:break-word">#
 停止 id为 0的指定应用程序</span></span><br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<span style="font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">$ pm2 restart all &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # 重启所有应用</span><br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<span style="font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">$ pm2 reload all &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px; color:rgb(76,51,229)"><span style="word-wrap:break-word">&nbsp;#
 重启 cluster mode下的所有应用</span></span><br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<span style="font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">$ pm2 gracefulReload all &nbsp; &nbsp; &nbsp; &nbsp;# Graceful reload all apps in cluster mode</span><br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<span style="font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">$ pm2 delete all &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# 关闭并删除所有应用</span><br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<span style="font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">$ pm2 delete 0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# 删除指定应用 id 0</span><br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<span style="font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">$ pm2 scale api 10 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px; color:rgb(76,51,229)"><span style="word-wrap:break-word">&nbsp;#
 把名字叫api的应用扩展到10个实例</span></span><br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<span style="font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">$ pm2 reset [app-name] &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# 重置重启数量</span><br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<span style="font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">$ pm2 startup &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px; color:rgb(76,51,229)"><span style="word-wrap:break-word">#
 创建开机自启动命令</span></span><br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<span style="font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">$ pm2 save &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px; color:rgb(76,51,229)"><span style="word-wrap:break-word">#
 保存当前应用列表</span></span><br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<span style="font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">$ pm2 resurrect &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px; color:rgb(76,51,229)"><span style="word-wrap:break-word">&nbsp;#
 重新加载保存的应用列表</span></span><br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<span style="font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">$ pm2 update &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# Save processes, kill PM2 and restore processes</span><br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<span style="font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">$ pm2 generate &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# Generate a sample json configuration file</span><br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<span style="font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">$ pm2 deploy app.json prod setup &nbsp; &nbsp;# Setup "prod" remote server</span><br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<span style="font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">$ pm2 deploy app.json prod &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# Update "prod" remote server</span><br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<span style="font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">$ pm2 deploy app.json prod revert 2 # Revert "prod" remote server by 2</span><br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<span style="font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">$ pm2 module:generate [name] &nbsp; &nbsp;# Generate sample module with name [name]</span><br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<span style="font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">$ pm2 install pm2-logrotate &nbsp; &nbsp; # Install module (here a log rotation system)</span><br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<span style="font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">$ pm2 uninstall pm2-logrotate &nbsp; # Uninstall module</span><br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<span style="font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">$ pm2 publish &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # Increment version, git push and npm publish</span><br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<br style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">
<span style="word-wrap:break-word; color:rgb(57,154,178); font-family:verdana,Arial,Helvetica,sans-serif; font-size:21px">简介</span>
<p style="word-wrap:break-word; margin:10px auto; padding-top:0px; padding-bottom:0px; font-size:13px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif">
PM2是node进程管理工具，可以利用它来简化很多node应用管理的繁琐任务，如性能监控、自动重启、负载均衡等，而且使用非常简单。</p>
<p style="word-wrap:break-word; margin:10px auto; padding-top:0px; padding-bottom:0px; font-size:13px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif">
下面就对PM2进行入门性的介绍，基本涵盖了PM2的常用的功能和配置。</p>
<h2 id="安装" style="word-wrap:break-word; margin:10px 0px; padding:0px; color:rgb(57,154,178); line-height:1.5; font-size:21px; font-family:verdana,Arial,Helvetica,sans-serif"><a name="t0"></a><a name="t0"></a>
安装</h2>
<p style="word-wrap:break-word; margin:10px auto; padding-top:0px; padding-bottom:0px; font-size:13px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif">
全局安装，简直不能更简单。</p>
<span style="word-wrap:break-word; font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px; color:rgb(76,51,229)"><span style="word-wrap:break-word">​</span></span><span class="hljs-built_in" style="word-wrap:break-word; font-family:&quot;font-size:12px !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; font-size:14px; white-space:pre-wrap; margin:0px; padding:0px; color:rgb(76,51,229); line-height:1.8"><span style="word-wrap:break-word">npm</span></span><span style="word-wrap:break-word; font-family:&quot;font-size:12px !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; font-size:14px; white-space:pre-wrap; color:rgb(76,51,229)"><span style="word-wrap:break-word">
 install -g pm2</span></span><span style="font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px"></span>
<h2 id="目录介绍" style="word-wrap:break-word; margin:10px 0px; padding:0px; color:rgb(57,154,178); line-height:1.5; font-size:21px; font-family:verdana,Arial,Helvetica,sans-serif"><a name="t1"></a><a name="t1"></a>
目录介绍</h2>
<p style="word-wrap:break-word; margin:10px auto; padding-top:0px; padding-bottom:0px; font-size:13px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif">
pm2安装好后，会自动创建下面目录。看文件名基本就知道干嘛的了，就不翻译了。</p>
<ul style="word-wrap:break-word; margin:0px 0px 0px 30px; padding:0px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif; font-size:14px">
<li style="word-wrap:break-word; margin:0px; padding:0px; list-style:disc"><code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important">$HOME/.pm2</code>&nbsp;will
 contain all PM2 related files</li><li style="word-wrap:break-word; margin:0px; padding:0px; list-style:disc"><code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important">$HOME/.pm2/logs</code>&nbsp;will
 contain all applications logs</li><li style="word-wrap:break-word; margin:0px; padding:0px; list-style:disc"><code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important">$HOME/.pm2/pids</code>&nbsp;will
 contain all applications pids</li><li style="word-wrap:break-word; margin:0px; padding:0px; list-style:disc"><code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important">$HOME/.pm2/pm2.log</code>&nbsp;PM2
 logs</li><li style="word-wrap:break-word; margin:0px; padding:0px; list-style:disc"><code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important">$HOME/.pm2/pm2.pid</code>&nbsp;PM2
 pid</li><li style="word-wrap:break-word; margin:0px; padding:0px; list-style:disc"><code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important">$HOME/.pm2/rpc.sock</code>&nbsp;Socket
 file for remote commands</li><li style="word-wrap:break-word; margin:0px; padding:0px; list-style:disc"><code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important">$HOME/.pm2/pub.sock</code>&nbsp;Socket
 file for publishable events</li><li style="word-wrap:break-word; margin:0px; padding:0px; list-style:disc"><code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important">$HOME/.pm2/conf.js</code>&nbsp;PM2
 Configuration</li></ul>
<h2 id="入门教程" style="word-wrap:break-word; margin:10px 0px; padding:0px; color:rgb(57,154,178); line-height:1.5; font-size:21px; font-family:verdana,Arial,Helvetica,sans-serif"><a name="t2"></a><a name="t2"></a>
入门教程</h2>
<p style="word-wrap:break-word; margin:10px auto; padding-top:0px; padding-bottom:0px; font-size:13px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif">
挑我们最爱的express应用来举例。一般我们都是通过<code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important"><span style="word-wrap:break-word; color:rgb(76,51,229)"><span style="word-wrap:break-word">npm
 start</span></span></code><span style="word-wrap:break-word; color:rgb(76,51,229)"><span style="word-wrap:break-word">启动应用，其实就是调用</span></span><code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important"><span style="word-wrap:break-word; color:rgb(76,51,229)"><span style="word-wrap:break-word">node
 ./bin/www</span></span></code>。那么，换成pm2就是</p>
<p style="word-wrap:break-word; margin:10px auto; padding-top:0px; padding-bottom:0px; font-size:13px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif">
注意，这里用了<code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important"><span style="word-wrap:break-word; color:rgb(76,51,229)"><span style="word-wrap:break-word">--watch</span></span></code><span style="word-wrap:break-word; color:rgb(76,51,229)"><span style="word-wrap:break-word">参数，意味着当你的express应用代码发生变化时，pm2会帮你重启服务</span></span>，多贴心。</p>
<pre class="powershell" style="word-wrap:break-word; margin-top:10px; margin-bottom:10px; padding:0px; white-space:pre-wrap; color:rgb(51,51,51); font-size:14px; background-color:rgb(255,255,255)" name="code"><code class="hljs hljs sql" style="word-wrap:break-word; margin:auto; vertical-align:middle; display:block; height:auto; overflow-x:auto; color:rgb(0,0,0); font-family:&quot;font-size:12px !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:5px!important; line-height:1.5!important">pm2 <span class="hljs-operator" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-keyword" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.8"><span class="hljs-keyword">start</span></span> ./<span class="hljs-keyword">bin</span>/www <span class="hljs-comment">--watch</span></span></code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre>
<p style="word-wrap:break-word; margin:10px auto; padding-top:0px; padding-bottom:0px; font-size:13px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif">
入门太简单了，没什么好讲的。直接上官方文档：<a target="_blank" href="http://pm2.keymetrics.io/docs/usage/quick-start" rel="nofollow" class="uri" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,0,0); border-bottom:1px dotted rgb(51,51,51)">http://pm2.keymetrics.io/docs/usage/quick-start</a></p>
<h2 id="常用命令" style="word-wrap:break-word; margin:10px 0px; padding:0px; color:rgb(57,154,178); line-height:1.5; font-size:21px; font-family:verdana,Arial,Helvetica,sans-serif"><a name="t3"></a><a name="t3"></a>
常用命令</h2>
<h3 id="启动" style="word-wrap:break-word; margin:10px 0px; padding:0px; font-size:16px; line-height:1.5; font-family:verdana,Arial,Helvetica,sans-serif"><a name="t4"></a><a name="t4"></a>
启动</h3>
<p style="word-wrap:break-word; margin:10px auto; padding-top:0px; padding-bottom:0px; font-size:13px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif">
参数说明：</p>
<ul style="word-wrap:break-word; margin:0px 0px 0px 30px; padding:0px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif; font-size:14px">
<li style="word-wrap:break-word; margin:0px; padding:0px; list-style:disc"><code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important">--watch</code>：监听应用目录的变化，一旦发生变化，自动重启。如果要精确监听、不见听的目录，最好通过配置文件。</li><li style="word-wrap:break-word; margin:0px; padding:0px; list-style:disc"><code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important">-i
 --instances</code>：<span style="word-wrap:break-word; color:rgb(76,51,229)"><span style="word-wrap:break-word">启用多少个实例，可用于负载均衡。如果</span></span><code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important"><span style="word-wrap:break-word; color:rgb(76,51,229)"><span style="word-wrap:break-word">-i
 0</span></span></code><span style="word-wrap:break-word; color:rgb(76,51,229)"><span style="word-wrap:break-word">或者</span></span><code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important"><span style="word-wrap:break-word; color:rgb(76,51,229)"><span style="word-wrap:break-word">-i
 max</span></span></code><span style="word-wrap:break-word; color:rgb(76,51,229)"><span style="word-wrap:break-word">，则根据当前机器核数确定实例数目</span></span>。</li><li style="word-wrap:break-word; margin:0px; padding:0px; list-style:disc"><code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important">--ignore-watch</code>：<span style="word-wrap:break-word; color:rgb(76,51,229)"><span style="word-wrap:break-word">排除监听的目录/文件，可以是特定的文件名，也可以是正则</span></span>。比如<code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important">--ignore-watch="test
 node_modules "some scripts""</code></li><li style="word-wrap:break-word; margin:0px; padding:0px; list-style:disc"><code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important">-n
 --name</code>：应用的名称。查看应用信息的时候可以用到。</li><li style="word-wrap:break-word; margin:0px; padding:0px; list-style:disc"><code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important">-o
 --output &lt;path&gt;</code>：标准输出日志文件的路径。</li><li style="word-wrap:break-word; margin:0px; padding:0px; list-style:disc"><code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important">-e
 --error &lt;path&gt;</code>：错误输出日志文件的路径。</li><li style="word-wrap:break-word; margin:0px; padding:0px; list-style:disc"><code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important">--interpreter
 &lt;interpreter&gt;</code>：the interpreter pm2 should use for executing app (bash, python...)。比如你用的coffee script来编写应用。</li></ul>
<p style="word-wrap:break-word; margin:10px auto; padding-top:0px; padding-bottom:0px; font-size:13px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif">
完整命令行参数列表：<a target="_blank" href="http://pm2.keymetrics.io/docs/usage/quick-start/#options" rel="nofollow" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,0,0); border-bottom:1px dotted rgb(51,51,51)">地址</a></p>
<pre class="powershell" style="word-wrap:break-word; margin-top:10px; margin-bottom:10px; padding:0px; white-space:pre-wrap; color:rgb(51,51,51); font-size:14px; background-color:rgb(255,255,255)" name="code"><code class="hljs hljs sql" style="word-wrap:break-word; margin:auto; vertical-align:middle; display:block; height:auto; overflow-x:auto; color:rgb(0,0,0); font-family:&quot;font-size:12px !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:5px!important; line-height:1.5!important">pm2 <span class="hljs-operator" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-keyword" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.8"><span class="hljs-keyword">start</span></span> app.js <span class="hljs-comment">--watch -i </span></span><span class="hljs-number" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-comment">2</span></span></code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre>
<h3 id="重启" style="word-wrap:break-word; margin:10px 0px; padding:0px; font-size:16px; line-height:1.5; font-family:verdana,Arial,Helvetica,sans-serif"><a name="t5"></a><a name="t5"></a>
重启</h3>
<pre class="powershell" style="word-wrap:break-word; margin-top:10px; margin-bottom:10px; padding:0px; white-space:pre-wrap; color:rgb(51,51,51); font-size:14px; background-color:rgb(255,255,255)" name="code"><code class="hljs hljs css" style="word-wrap:break-word; margin:auto; vertical-align:middle; display:block; height:auto; overflow-x:auto; color:rgb(0,0,0); font-family:&quot;font-size:12px !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:5px!important; line-height:1.5!important"><span class="hljs-selector-tag">pm2</span> <span class="hljs-selector-tag">restart</span> <span class="hljs-selector-tag">app</span><span class="hljs-selector-class">.js</span></code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre>
<h3 id="停止" style="word-wrap:break-word; margin:10px 0px; padding:0px; font-size:16px; line-height:1.5; font-family:verdana,Arial,Helvetica,sans-serif"><a name="t6"></a><a name="t6"></a>
停止</h3>
<p style="word-wrap:break-word; margin:10px auto; padding-top:0px; padding-bottom:0px; font-size:13px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif">
停止特定的应用。可以先通过<code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important"><span style="word-wrap:break-word"><span style="word-wrap:break-word; color:rgb(76,51,229)">pm2
 list</span></span></code><span style="word-wrap:break-word"><span style="word-wrap:break-word; color:rgb(76,51,229)">获取应用的名字（--name指定的）或者进程id。</span></span></p>
<pre class="powershell" style="word-wrap:break-word; margin-top:10px; margin-bottom:10px; padding:0px; white-space:pre-wrap; color:rgb(51,51,51); font-size:14px; background-color:rgb(255,255,255)" name="code"><code class="hljs hljs vbscript" style="word-wrap:break-word; margin:auto; vertical-align:middle; display:block; height:auto; overflow-x:auto; color:rgb(0,0,0); font-family:&quot;font-size:12px !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:5px!important; line-height:1.5!important">pm2 <span class="hljs-keyword">stop</span> app_name|app_id</code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre>
<p style="word-wrap:break-word; margin:10px auto; padding-top:0px; padding-bottom:0px; font-size:13px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif">
如果要停止所有应用，可以</p>
<pre class="powershell" style="word-wrap:break-word; margin-top:10px; margin-bottom:10px; padding:0px; white-space:pre-wrap; color:rgb(51,51,51); font-size:14px; background-color:rgb(255,255,255)" name="code"><code class="hljs hljs apache vbscript" style="word-wrap:break-word; margin:auto; vertical-align:middle; display:block; height:auto; overflow-x:auto; color:rgb(0,0,0); font-family:&quot;font-size:12px !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:5px!important; line-height:1.5!important"><span class="hljs-keyword" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.8">pm2</span> <span class="hljs-keyword">stop</span> <span class="hljs-literal" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8">all</span></code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre>
<h3 id="删除" style="word-wrap:break-word; margin:10px 0px; padding:0px; font-size:16px; line-height:1.5; font-family:verdana,Arial,Helvetica,sans-serif"><a name="t7"></a><a name="t7"></a>
删除</h3>
<p style="word-wrap:break-word; margin:10px auto; padding-top:0px; padding-bottom:0px; font-size:13px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif">
类似<code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important">pm2
 stop</code>，如下</p>
<pre class="powershell" style="word-wrap:break-word; margin-top:10px; margin-bottom:10px; padding:0px; white-space:pre-wrap; color:rgb(51,51,51); font-size:14px; background-color:rgb(255,255,255)" name="code"><code class="hljs hljs apache vbscript" style="word-wrap:break-word; margin:auto; vertical-align:middle; display:block; height:auto; overflow-x:auto; color:rgb(0,0,0); font-family:&quot;font-size:12px !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:5px!important; line-height:1.5!important"><span class="hljs-keyword" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.8">pm2</span> <span class="hljs-keyword">stop</span> app_name|app_id <span class="hljs-keyword" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.8">pm2</span> <span class="hljs-keyword">stop</span> <span class="hljs-literal" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8">all</span></code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre>
<h3 id="查看进程状态" style="word-wrap:break-word; margin:10px 0px; padding:0px; font-size:16px; line-height:1.5; font-family:verdana,Arial,Helvetica,sans-serif"><a name="t8"></a><a name="t8"></a>
查看进程状态</h3>
<pre class="powershell" style="word-wrap:break-word; margin-top:10px; margin-bottom:10px; padding:0px; white-space:pre-wrap; color:rgb(51,51,51); font-size:14px; background-color:rgb(255,255,255)" name="code"><code class="hljs hljs php" style="word-wrap:break-word; margin:auto; vertical-align:middle; display:block; height:auto; overflow-x:auto; color:rgb(0,0,0); font-family:&quot;font-size:12px !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:5px!important; line-height:1.5!important">pm2 <span class="hljs-keyword" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.8"><span class="hljs-keyword">list</span></span></code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre>
<h3 id="查看某个进程的信息" style="word-wrap:break-word; margin:10px 0px; padding:0px; font-size:16px; line-height:1.5; font-family:verdana,Arial,Helvetica,sans-serif"><a name="t9"></a><a name="t9"></a>
查看某个进程的信息</h3>
<pre class="powershell" style="word-wrap:break-word; margin-top:10px; margin-bottom:10px; padding:0px; white-space:pre-wrap; color:rgb(51,51,51); font-size:14px; background-color:rgb(255,255,255)" name="code"><code class="hljs hljs perl" style="word-wrap:break-word; margin:auto; vertical-align:middle; display:block; height:auto; overflow-x:auto; color:rgb(0,0,0); font-family:&quot;font-size:12px !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:5px!important; line-height:1.5!important"><ol class="hljs-ln"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">[root<span class="hljs-variable" style="word-wrap:break-word; margin:0px; padding:0px; color:green; line-height:1.8">@iZ94wb7tioqZ</span> pids]<span class="hljs-comment" style="word-wrap:break-word; margin:0px; padding:0px; color:green; line-height:1.8"><span class="hljs-comment"># pm2 describe 0</span></span><span class="hljs-comment"> Describing </span><span class="hljs-keyword" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.8"><span class="hljs-comment">process</span></span><span class="hljs-comment"> with id </span><span class="hljs-number" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-comment">0</span></span><span class="hljs-comment"> - name oc-server</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">┌───────────────────┬──────────────────────────────────────────────────────────────┐</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">│ status            │ online                                                       │</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">│ name              │ oc-server                                                    │</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="5"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">│ id                │ <span class="hljs-number" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-number">0</span></span> │</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="6"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">│ path              │ /<span class="hljs-keyword" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.8">data</span>/file/qiquan/over_the_counter/server/bin/www            │</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="7"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">│ args              │                                                              │</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="8"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">│ <span class="hljs-keyword" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.8"><span class="hljs-keyword">exec</span></span> cwd          │ /<span class="hljs-keyword" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.8">data</span>/file/qiquan/over_the_counter/server                    │</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="9"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">│ error <span class="hljs-keyword" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.8"><span class="hljs-keyword">log</span></span> path    │ /<span class="hljs-keyword" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.8">data</span>/file/qiquan/over_the_counter/server/logs/app-err-<span class="hljs-number" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-number">0</span></span>.<span class="hljs-keyword" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.8">log</span> │</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="10"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">│ out <span class="hljs-keyword" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.8"><span class="hljs-keyword">log</span></span> path      │ /<span class="hljs-keyword" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.8">data</span>/file/qiquan/over_the_counter/server/logs/app-out-<span class="hljs-number" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-number">0</span></span>.<span class="hljs-keyword" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.8">log</span> │</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="11"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">│ pid path          │ /root/.pm2/pids/oc-server-<span class="hljs-number" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-number">0</span></span>.pid                              │</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="12"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">│ mode              │ fork_mode                                                    │</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="13"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">│ node v8 arguments │                                                              │</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="14"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">│ watch &amp; reload    │                                                             │</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="15"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">│ interpreter       │ node                                                         │</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="16"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">│ restarts          │ <span class="hljs-number" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-number">293</span></span> │</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="17"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">│ unstable restarts │ <span class="hljs-number" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-number">0</span></span> │</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="18"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">│ uptime            │ <span class="hljs-number" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-number">87</span></span><span class="hljs-keyword" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.8"><span class="hljs-keyword">m</span></span> │</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="19"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">│ created at        │ <span class="hljs-number" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-number">2016</span></span>-<span class="hljs-number" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8">08</span>-<span class="hljs-number" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-number">26</span></span>T08:<span class="hljs-number" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-number">13</span></span>:<span class="hljs-number" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-number">43.705</span></span>Z                                     │</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="20"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">└───────────────────┴──────────────────────────────────────────────────────────────┘</div></div></li></ol></code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre>
<h2 id="配置文件" style="word-wrap:break-word; margin:10px 0px; padding:0px; color:rgb(57,154,178); line-height:1.5; font-size:21px; font-family:verdana,Arial,Helvetica,sans-serif"><a name="t10"></a><a name="t10"></a>
配置文件</h2>
<h3 id="简单说明" style="word-wrap:break-word; margin:10px 0px; padding:0px; font-size:16px; line-height:1.5; font-family:verdana,Arial,Helvetica,sans-serif"><a name="t11"></a><a name="t11"></a>
简单说明</h3>
<ul style="word-wrap:break-word; margin:0px 0px 0px 30px; padding:0px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif; font-size:14px">
<li style="word-wrap:break-word; margin:0px; padding:0px; list-style:disc">配置文件里的设置项，跟命令行参数基本是一一对应的。</li><li style="word-wrap:break-word; margin:0px; padding:0px; list-style:disc">可以选择<code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important">yaml</code>或者<code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important">json</code>文件，就看个人洗好了。</li><li style="word-wrap:break-word; margin:0px; padding:0px; list-style:disc"><code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important"><span style="word-wrap:break-word"><span style="word-wrap:break-word; color:rgb(76,51,229)">json</span></span></code><span style="word-wrap:break-word"><span style="word-wrap:break-word; color:rgb(76,51,229)">格式的配置文件，pm2当作普通的js文件来处理</span></span>，所以可以在里面添加注释或者编写代码，这对于动态调整配置很有好处。</li><li style="word-wrap:break-word; margin:0px; padding:0px; list-style:disc">如果启动的时候指定了配置文件，那么命令行参数会被忽略。（个别参数除外，比如--env）</li></ul>
<h3 id="例子" style="word-wrap:break-word; margin:10px 0px; padding:0px; font-size:16px; line-height:1.5; font-family:verdana,Arial,Helvetica,sans-serif"><a name="t12"></a><a name="t12"></a>
例子</h3>
<p style="word-wrap:break-word; margin:10px auto; padding-top:0px; padding-bottom:0px; font-size:13px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif">
举个简单例子，完整配置说明请参考<a target="_blank" href="http://pm2.keymetrics.io/docs/usage/pm2-doc-single-page/" rel="nofollow" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,0,0); border-bottom:1px dotted rgb(51,51,51)">官方文档</a>。</p>
<div class="sourceCode" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif; font-size:14px">
<pre><code class="language-javascript hljs"><code class="sourceCode javascript hljs hljs" style="word-wrap:break-word; margin:auto; vertical-align:middle; display:block; height:auto; overflow-x:auto; color:rgb(0,0,0); font-family:&quot;font-size:12px !important;border:1px solid #CCCCCC !important;border-radius:3px !important;" ;="" padding:5px!important;="" line-height:1.5!important"=""><span class="op" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8">{</span> <span class="st" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-string" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-string">"name"</span></span></span> <span class="op" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8">:</span> <span class="st" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-string" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-string">"fis-receiver"</span></span></span><span class="op" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8">,</span> <span class="co" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-comment" style="word-wrap:break-word; margin:0px; padding:0px; color:green; line-height:1.8"><span class="hljs-comment">// 应用名称</span></span></span><span class="hljs-comment"> </span><span class="st" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-string" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-comment">"script"</span></span></span><span class="hljs-comment"> </span><span class="op" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-comment">:</span></span><span class="hljs-comment"> </span><span class="st" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-string" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-comment">"./bin/www"</span></span></span><span class="op" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-comment">,</span></span><span class="hljs-comment"> </span><span class="co" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-comment" style="word-wrap:break-word; margin:0px; padding:0px; color:green; line-height:1.8"><span class="hljs-comment">// 实际启动脚本</span></span></span><span class="hljs-comment"> </span><span class="st" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-string" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-comment">"cwd"</span></span></span><span class="hljs-comment"> </span><span class="op" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-comment">:</span></span><span class="hljs-comment"> </span><span class="st" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-string" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-comment">"./"</span></span></span><span class="op" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-comment">,</span></span><span class="hljs-comment"> </span><span class="co" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-comment" style="word-wrap:break-word; margin:0px; padding:0px; color:green; line-height:1.8"><span class="hljs-comment">// 当前工作路径</span></span></span><span class="hljs-comment"> </span><span class="st" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-string" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-comment">"watch"</span></span></span><span class="op" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-comment">:</span></span><span class="hljs-comment"> [ </span><span class="co" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-comment" style="word-wrap:break-word; margin:0px; padding:0px; color:green; line-height:1.8"><span class="hljs-comment">// 监控变化的目录，一旦变化，自动重启</span></span></span><span class="hljs-comment"> </span><span class="st" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-string" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-comment">"bin"</span></span></span><span class="op" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-comment">,</span></span><span class="hljs-comment"> </span><span class="st" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-string" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-comment">"routers"</span></span></span><span class="hljs-comment"> ]</span><span class="op" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-comment">,</span></span><span class="hljs-comment"> </span><span class="st" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-string" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-comment">"ignore_watch"</span></span></span><span class="hljs-comment"> </span><span class="op" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-comment">:</span></span><span class="hljs-comment"> [ </span><span class="co" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-comment" style="word-wrap:break-word; margin:0px; padding:0px; color:green; line-height:1.8"><span class="hljs-comment">// 从监控目录中排除</span></span></span><span class="hljs-comment"> </span><span class="st" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-string" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-comment">"node_modules"</span></span></span><span class="op" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-comment">,</span></span><span class="hljs-comment"> </span><span class="st" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-string" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-comment">"logs"</span></span></span><span class="op" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-comment">,</span></span><span class="hljs-comment"> </span><span class="st" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-string" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-comment">"public"</span></span></span><span class="hljs-comment"> ]</span><span class="op" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-comment">,</span></span><span class="hljs-comment"> </span><span class="st" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-string" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-comment">"watch_options"</span></span></span><span class="op" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-comment">:</span></span><span class="hljs-comment"> </span><span class="op" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-comment">{</span></span><span class="hljs-comment"> </span><span class="st" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-string" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-comment">"followSymlinks"</span></span></span><span class="op" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-comment">:</span></span><span class="hljs-comment"> </span><span class="kw" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-literal" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-comment">false</span></span></span><span class="hljs-comment"> </span><span class="op" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-comment">},</span></span><span class="hljs-comment"> </span><span class="st" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-string" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-comment">"error_file"</span></span></span><span class="hljs-comment"> </span><span class="op" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-comment">:</span></span><span class="hljs-comment"> </span><span class="st" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-string" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-comment">"./logs/app-err.log"</span></span></span><span class="op" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-comment">,</span></span><span class="hljs-comment"> </span><span class="co" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-comment" style="word-wrap:break-word; margin:0px; padding:0px; color:green; line-height:1.8"><span class="hljs-comment">// 错误日志路径</span></span></span><span class="hljs-comment"> </span><span class="st" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-string" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-comment">"out_file"</span></span></span><span class="hljs-comment"> </span><span class="op" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-comment">:</span></span><span class="hljs-comment"> </span><span class="st" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-string" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-comment">"./logs/app-out.log"</span></span></span><span class="op" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-comment">,</span></span><span class="hljs-comment"> </span><span class="co" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-comment" style="word-wrap:break-word; margin:0px; padding:0px; color:green; line-height:1.8"><span class="hljs-comment">// 普通日志路径</span></span></span><span class="hljs-comment"> </span><span class="st" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-string" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-comment">"env"</span></span></span><span class="op" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-comment">:</span></span><span class="hljs-comment"> </span><span class="op" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-comment">{</span></span><span class="hljs-comment"> </span><span class="st" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-string" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-comment">"NODE_ENV"</span></span></span><span class="op" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-comment">:</span></span><span class="hljs-comment"> </span><span class="st" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-string" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-comment">"production"</span></span></span><span class="hljs-comment"> </span><span class="co" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-comment" style="word-wrap:break-word; margin:0px; padding:0px; color:green; line-height:1.8"><span class="hljs-comment">// 环境参数，当前指定为生产环境</span></span></span><span class="hljs-comment"> </span><span class="op" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-comment">}</span></span><span class="hljs-comment"> </span><span class="op" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-comment">}</span></span></code></code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre>
</div>
<h2 id="自动重启" style="word-wrap:break-word; margin:10px 0px; padding:0px; color:rgb(57,154,178); line-height:1.5; font-size:21px; font-family:verdana,Arial,Helvetica,sans-serif"><a name="t13"></a><a name="t13"></a>
自动重启</h2>
<p style="word-wrap:break-word; margin:10px auto; padding-top:0px; padding-bottom:0px; font-size:13px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif">
前面已经提到了，这里贴命令行，更多点击<a target="_blank" href="http://pm2.keymetrics.io/docs/usage/watch-and-restart/#auto-restart-apps-on-file-change" rel="nofollow" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,0,0); border-bottom:1px dotted rgb(51,51,51)">这里</a>。</p>
<pre style="word-wrap:break-word; margin-top:10px; margin-bottom:10px; padding:0px; white-space:pre-wrap; color:rgb(51,51,51); font-size:14px; background-color:rgb(255,255,255)"><code class="hljs sql hljs" style="word-wrap:break-word; margin:auto; vertical-align:middle; display:block; height:auto; overflow-x:auto; color:rgb(0,0,0); font-family:&quot;font-size:12px !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:5px!important; line-height:1.5!important">pm2 <span class="hljs-keyword" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.8"><span class="hljs-keyword">start</span></span><span class="hljs-operator" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"> app.js </span><span class="hljs-comment" style="word-wrap:break-word; margin:0px; padding:0px; color:green; line-height:1.8"><span class="hljs-comment">--watch</span></span></code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre>
<p style="word-wrap:break-word; margin:10px auto; padding-top:0px; padding-bottom:0px; font-size:13px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif">
这里是监控整个项目的文件，<span style="word-wrap:break-word"><span style="word-wrap:break-word; color:rgb(76,51,229)">如果只想监听指定文件和目录，建议通过配置文件的</span></span><code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important"><span style="word-wrap:break-word"><span style="word-wrap:break-word; color:rgb(76,51,229)">watch</span></span></code><span style="word-wrap:break-word"><span style="word-wrap:break-word; color:rgb(76,51,229)">、</span></span><code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important"><span style="word-wrap:break-word"><span style="word-wrap:break-word; color:rgb(76,51,229)">ignore_watch</span></span></code><span style="word-wrap:break-word"><span style="word-wrap:break-word; color:rgb(76,51,229)">字段来设置</span></span>。</p>
<h2 id="环境切换" style="word-wrap:break-word; margin:10px 0px; padding:0px; color:rgb(57,154,178); line-height:1.5; font-size:21px; font-family:verdana,Arial,Helvetica,sans-serif"><a name="t14"></a><a name="t14"></a>
环境切换</h2>
<p style="word-wrap:break-word; margin:10px auto; padding-top:0px; padding-bottom:0px; font-size:13px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif">
在实际项目开发中，我们的应用经常需要在多个环境下部署，比如开发环境、测试环境、生产环境等。在不同环境下，有时候配置项会有差异，比如链接的数据库地址不同等。</p>
<p style="word-wrap:break-word; margin:10px auto; padding-top:0px; padding-bottom:0px; font-size:13px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif">
对于这种场景，pm2也是可以很好支持的。<span style="word-wrap:break-word"><span style="word-wrap:break-word; color:rgb(76,51,229)">首先通过在配置文件中通过</span></span><code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important"><span style="word-wrap:break-word"><span style="word-wrap:break-word; color:rgb(76,51,229)">env_xx</span></span></code><span style="word-wrap:break-word"><span style="word-wrap:break-word; color:rgb(76,51,229)">来声明不同环境的配置，然后在启动应用时，通过</span></span><code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important"><span style="word-wrap:break-word"><span style="word-wrap:break-word; color:rgb(76,51,229)">--env</span></span></code><span style="word-wrap:break-word"><span style="word-wrap:break-word; color:rgb(76,51,229)">参数指定运行的环境</span></span>。</p>
<h3 id="环境配置声明" style="word-wrap:break-word; margin:10px 0px; padding:0px; font-size:16px; line-height:1.5; font-family:verdana,Arial,Helvetica,sans-serif"><a name="t15"></a><a name="t15"></a>
环境配置声明</h3>
<p style="word-wrap:break-word; margin:10px auto; padding-top:0px; padding-bottom:0px; font-size:13px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif">
首先，在配置文件中，通过<code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important">env</code>选项声明多个环境配置。简单说明下：</p>
<ul style="word-wrap:break-word; margin:0px 0px 0px 30px; padding:0px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif; font-size:14px">
<li style="word-wrap:break-word; margin:0px; padding:0px; list-style:disc"><code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important"><span style="word-wrap:break-word"><span style="word-wrap:break-word; color:rgb(76,51,229)">env</span></span></code><span style="word-wrap:break-word"><span style="word-wrap:break-word; color:rgb(76,51,229)">为默认的环境配置（生产环境）</span></span>，<code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important">env_dev</code>、<code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important">env_test</code>则分别是开发、测试环境。可以看到，不同环境下的<code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important">NODE_ENV</code>、<code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important">REMOTE_ADDR</code>字段的值是不同的。</li><li style="word-wrap:break-word; margin:0px; padding:0px; list-style:disc">在应用中，可以通过<code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important">process.env.REMOTE_ADDR</code>等来读取配置中生命的变量。</li></ul>
<div class="sourceCode" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif; font-size:14px">
<pre><code class="language-javascript hljs"><code class="sourceCode javascript hljs hljs" style="word-wrap:break-word; margin:auto; vertical-align:middle; display:block; height:auto; overflow-x:auto; color:rgb(0,0,0); font-family:&quot;font-size:12px !important;border:1px solid #CCCCCC !important;border-radius:3px !important;" ;="" padding:5px!important;="" line-height:1.5!important"=""> <span class="st" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-string" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-string">"env"</span></span></span><span class="op" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8">:</span> <span class="op" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8">{</span> <span class="st" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-string" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-string">"NODE_ENV"</span></span></span><span class="op" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8">:</span> <span class="st" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-string" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-string">"production"</span></span></span><span class="op" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8">,</span> <span class="st" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-string" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-string">"REMOTE_ADDR"</span></span></span><span class="op" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8">:</span> <span class="st" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-string" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-string">"http://www.example.com/"</span></span></span> <span class="op" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8">},</span> <br style="word-wrap:break-word">​<span class="st" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-string" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-string">"env_dev"</span></span></span><span class="op" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8">:</span> <span class="op" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8">{</span> <span class="st" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-string" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-string">"NODE_ENV"</span></span></span><span class="op" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8">:</span> <span class="st" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-string" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-string">"development"</span></span></span><span class="op" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8">,</span> <span class="st" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-string" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-string">"REMOTE_ADDR"</span></span></span><span class="op" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8">:</span> <span class="st" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-string" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-string">"http://wdev.example.com/"</span></span></span> <span class="op" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8">},</span> <br style="word-wrap:break-word">​<span class="st" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-string" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-string">"env_test"</span></span></span><span class="op" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8">:</span> <span class="op" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8">{</span> <span class="st" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-string" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-string">"NODE_ENV"</span></span></span><span class="op" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8">:</span> <span class="st" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-string" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-string">"test"</span></span></span><span class="op" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8">,</span> <span class="st" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-string" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-string">"REMOTE_ADDR"</span></span></span><span class="op" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8">:</span> <span class="st" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-string" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-string">"http://wtest.example.com/"</span></span></span> <span class="op" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8">}</span></code></code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre>
</div>
<h3 id="启动指明环境" style="word-wrap:break-word; margin:10px 0px; padding:0px; font-size:16px; line-height:1.5; font-family:verdana,Arial,Helvetica,sans-serif"><a name="t16"></a><a name="t16"></a>
启动指明环境</h3>
<p style="word-wrap:break-word; margin:10px auto; padding-top:0px; padding-bottom:0px; font-size:13px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif">
假设通过下面启动脚本（开发环境），那么，此时<code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important">process.env.REMOTE_ADDR</code>的值就是相应的&nbsp;<a target="_blank" href="http://wdev.example.com/" rel="nofollow" class="uri" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,0,0); border-bottom:1px dotted rgb(51,51,51)">http://wdev.example.com/</a>&nbsp;，可以自己试验下。</p>
<pre class="powershell" style="word-wrap:break-word; margin-top:10px; margin-bottom:10px; padding:0px; white-space:pre-wrap; color:rgb(51,51,51); font-size:14px; background-color:rgb(255,255,255)" name="code"><code class="hljs hljs sql" style="word-wrap:break-word; margin:auto; vertical-align:middle; display:block; height:auto; overflow-x:auto; color:rgb(0,0,0); font-family:&quot;font-size:12px !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:5px!important; line-height:1.5!important">pm2 <span class="hljs-operator" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-keyword" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.8"><span class="hljs-keyword">start</span></span> app.js <span class="hljs-comment">--env dev</span></span></code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre>
<h2 id="负载均衡" style="word-wrap:break-word; margin:10px 0px; padding:0px; color:rgb(57,154,178); line-height:1.5; font-size:21px; font-family:verdana,Arial,Helvetica,sans-serif"><a name="t17"></a><a name="t17"></a>
负载均衡</h2>
<p style="word-wrap:break-word; margin:10px auto; padding-top:0px; padding-bottom:0px; font-size:13px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif">
命令如下，表示开启三个进程。如果<code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important">-i
 0</code>，则会根据机器当前核数自动开启尽可能多的进程。</p>
<pre class="powershell" style="word-wrap:break-word; margin-top:10px; margin-bottom:10px; padding:0px; white-space:pre-wrap; color:rgb(51,51,51); font-size:14px; background-color:rgb(255,255,255)" name="code"><code class="hljs hljs sql" style="word-wrap:break-word; margin:auto; vertical-align:middle; display:block; height:auto; overflow-x:auto; color:rgb(0,0,0); font-family:&quot;font-size:12px !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:5px!important; line-height:1.5!important">pm2 <span class="hljs-operator" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-keyword" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.8"><span class="hljs-keyword">start</span></span> app.js -i </span><span class="hljs-number" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-number">3</span></span><span class="hljs-operator" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"> </span><span class="hljs-comment" style="word-wrap:break-word; margin:0px; padding:0px; color:green; line-height:1.8"># 开启三个进程</span><span class="hljs-operator" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"> <br style="word-wrap:break-word">​<br style="word-wrap:break-word">​pm2 <span class="hljs-keyword" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.8"><span class="hljs-keyword">start</span></span> app.js -i <span class="hljs-aggregate" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-keyword">max</span></span> </span><span class="hljs-comment" style="word-wrap:break-word; margin:0px; padding:0px; color:green; line-height:1.8"># 根据机器CPU核数，开启对应数目的进程 </span></code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre>
<p style="word-wrap:break-word; margin:10px auto; padding-top:0px; padding-bottom:0px; font-size:13px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif">
参考文档：<a target="_blank" href="http://pm2.keymetrics.io/docs/usage/cluster-mode/#automatic-load-balancing" rel="nofollow" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,0,0); border-bottom:1px dotted rgb(51,51,51)">点击查看</a></p>
<h2 id="日志查看" style="word-wrap:break-word; margin:10px 0px; padding:0px; color:rgb(57,154,178); line-height:1.5; font-size:21px; font-family:verdana,Arial,Helvetica,sans-serif"><a name="t18"></a><a name="t18"></a>
日志查看</h2>
<p style="word-wrap:break-word; margin:10px auto; padding-top:0px; padding-bottom:0px; font-size:13px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif">
除了可以打开日志文件查看日志外，还可以通过<code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important"><span style="word-wrap:break-word"><span style="word-wrap:break-word; color:rgb(76,51,229)">pm2
 logs</span></span></code><span style="word-wrap:break-word"><span style="word-wrap:break-word; color:rgb(76,51,229)">来查看实时日志</span></span>。这点对于线上问题排查非常重要。</p>
<p style="word-wrap:break-word; margin:10px auto; padding-top:0px; padding-bottom:0px; font-size:13px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif">
比如某个node服务突然异常重启了，那么可以通过pm2提供的日志工具来查看实时日志，看是不是脚本出错之类导致的异常重启。</p>
<pre style="word-wrap:break-word; margin-top:10px; margin-bottom:10px; padding:0px; white-space:pre-wrap; color:rgb(51,51,51); font-size:14px; background-color:rgb(255,255,255)"><code class="hljs nginx hljs" style="word-wrap:break-word; margin:auto; vertical-align:middle; display:block; height:auto; overflow-x:auto; color:rgb(0,0,0); font-family:&quot;font-size:12px !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:5px!important; line-height:1.5!important"><span class="hljs-attribute" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8">pm2</span> logs</code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre>
<h2 id="指令tab补全" style="word-wrap:break-word; margin:10px 0px; padding:0px; color:rgb(57,154,178); line-height:1.5; font-size:21px; font-family:verdana,Arial,Helvetica,sans-serif"><a name="t19"></a><a name="t19"></a>
指令tab补全</h2>
<p style="word-wrap:break-word; margin:10px auto; padding-top:0px; padding-bottom:0px; font-size:13px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif">
运行<code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important">pm2
 --help</code>，可以看到<code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important">pm2</code>支持的子命令还是蛮多的，这个时候，自动完成的功能就很重要了。</p>
<p style="word-wrap:break-word; margin:10px auto; padding-top:0px; padding-bottom:0px; font-size:13px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif">
运行如下命令。恭喜，已经能够通过tab自动补全了。细节可参考<a target="_blank" href="http://pm2.keymetrics.io/docs/usage/auto-completion/" rel="nofollow" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,0,0); border-bottom:1px dotted rgb(51,51,51)">这里</a>。</p>
<pre style="word-wrap:break-word; margin-top:10px; margin-bottom:10px; padding:0px; white-space:pre-wrap; color:rgb(51,51,51); font-size:14px; background-color:rgb(255,255,255)"><code class="hljs sql hljs" style="word-wrap:break-word; margin:auto; vertical-align:middle; display:block; height:auto; overflow-x:auto; color:rgb(0,0,0); font-family:&quot;font-size:12px !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:5px!important; line-height:1.5!important">pm2 completion <span class="hljs-keyword" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.8"><span class="hljs-keyword">install</span></span> <span class="hljs-keyword" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.8"><span class="hljs-keyword">source</span></span> ~/.bash_profile</code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre>
<p style="word-wrap:break-word; margin:10px auto; padding-top:0px; padding-bottom:0px; font-size:13px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif">
<img src="http://www.cnblogs.com/chyingp/p/1445882022945.png" alt="Alt text" style="word-wrap:break-word; border:0px; margin:0px; padding:0px; max-width:900px"></p>
<h2 id="开机自动启动" style="word-wrap:break-word; margin:10px 0px; padding:0px; color:rgb(57,154,178); line-height:1.5; font-size:21px; font-family:verdana,Arial,Helvetica,sans-serif"><a name="t20"></a><a name="t20"></a>
开机自动启动</h2>
<p style="word-wrap:break-word; margin:10px auto; padding-top:0px; padding-bottom:0px; font-size:13px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif">
<span style="word-wrap:break-word"><span style="word-wrap:break-word; color:rgb(76,51,229)">可以通过</span></span><code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important"><span style="word-wrap:break-word"><span style="word-wrap:break-word; color:rgb(76,51,229)">pm2
 startup</span></span></code><span style="word-wrap:break-word"><span style="word-wrap:break-word; color:rgb(76,51,229)">来实现开机自启动</span></span>。细节可<a target="_blank" href="http://pm2.keymetrics.io/docs/usage/startup/" rel="nofollow" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,0,0); border-bottom:1px dotted rgb(51,51,51)">参考</a>。大致流程如下</p>
<ol style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 40px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif; font-size:14px">
<li style="word-wrap:break-word; margin:0px; padding:0px; list-style:decimal"><span style="word-wrap:break-word"><span style="word-wrap:break-word; color:rgb(76,51,229)">通过</span></span><code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important"><span style="word-wrap:break-word"><span style="word-wrap:break-word; color:rgb(76,51,229)">pm2
 save</span></span></code><span style="word-wrap:break-word"><span style="word-wrap:break-word; color:rgb(76,51,229)">保存当前进程状态</span></span>。</li><li style="word-wrap:break-word; margin:0px; padding:0px; list-style:decimal">通过<code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important"><span style="word-wrap:break-word; color:rgb(76,51,229)"><span style="word-wrap:break-word">pm2
 startup [platform]</span></span></code><span style="word-wrap:break-word; color:rgb(76,51,229)"><span style="word-wrap:break-word">生成开机自启动的命令</span></span>。（记得查看控制台输出）</li><li style="word-wrap:break-word; margin:0px; padding:0px; list-style:decimal">将步骤2生成的命令，粘贴到控制台进行，搞定。</li></ol>
<h2 id="传入node-args" style="word-wrap:break-word; margin:10px 0px; padding:0px; color:rgb(57,154,178); line-height:1.5; font-size:21px; font-family:verdana,Arial,Helvetica,sans-serif"><a name="t21"></a><a name="t21"></a>
传入node args</h2>
<p style="word-wrap:break-word; margin:10px auto; padding-top:0px; padding-bottom:0px; font-size:13px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif">
直接上例子，分别是通过命令行和配置文件。</p>
<p style="word-wrap:break-word; margin:10px auto; padding-top:0px; padding-bottom:0px; font-size:13px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif">
命令行：</p>
<pre class="powershell" style="word-wrap:break-word; margin-top:10px; margin-bottom:10px; padding:0px; white-space:pre-wrap; color:rgb(51,51,51); font-size:14px; background-color:rgb(255,255,255)" name="code"><code class="hljs hljs sql" style="word-wrap:break-word; margin:auto; vertical-align:middle; display:block; height:auto; overflow-x:auto; color:rgb(0,0,0); font-family:&quot;font-size:12px !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:5px!important; line-height:1.5!important">pm2 <span class="hljs-operator" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-keyword" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.8"><span class="hljs-keyword">start</span></span> app.js <span class="hljs-comment">--node-args=</span></span><span class="hljs-string" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-comment">"--harmony"</span></span></code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre>
<p style="word-wrap:break-word; margin:10px auto; padding-top:0px; padding-bottom:0px; font-size:13px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif">
配置文件：</p>
<div class="sourceCode" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif; font-size:14px">
<pre class="sourceCode json" style="word-wrap:break-word; margin-top:10px; margin-bottom:10px; padding:0px; white-space:pre-wrap" name="code"><code class="sourceCode json hljs hljs java" style="word-wrap:break-word; margin:auto; vertical-align:middle; display:block; height:auto; overflow-x:auto; color:rgb(0,0,0); font-family:&quot;font-size:12px !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:5px!important; line-height:1.5!important"><span class="fu" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8">{</span> <span class="dt" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-string">"</span><span class="hljs-attr" style="word-wrap:break-word; margin:0px; padding:0px; color:red; line-height:1.8"><span class="hljs-attribute" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-string">name</span></span></span><span class="hljs-string">"</span></span> <span class="fu" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8">:</span> <span class="st" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-string" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-string">"oc-server"</span></span></span><span class="fu" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8">,</span> <span class="dt" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-string">"</span><span class="hljs-attr" style="word-wrap:break-word; margin:0px; padding:0px; color:red; line-height:1.8"><span class="hljs-attribute" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-string">script</span></span></span><span class="hljs-string">"</span></span> <span class="fu" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8">:</span> <span class="st" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-string" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-string">"app.js"</span></span></span><span class="fu" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8">,</span> <span class="dt" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-string">"</span><span class="hljs-attr" style="word-wrap:break-word; margin:0px; padding:0px; color:red; line-height:1.8"><span class="hljs-attribute" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-string">node_args</span></span></span><span class="hljs-string">"</span></span> <span class="fu" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8">:</span> <span class="st" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-string" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-string">"--harmony"</span></span></span><span class="hljs-value" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"> </span><span class="fu" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8">}</span></code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre>
</div>
<h3 id="实例说明" style="word-wrap:break-word; margin:10px 0px; padding:0px; font-size:16px; line-height:1.5; font-family:verdana,Arial,Helvetica,sans-serif"><a name="t22"></a><a name="t22"></a>
实例说明</h3>
<p style="word-wrap:break-word; margin:10px auto; padding-top:0px; padding-bottom:0px; font-size:13px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif">
假设是在<code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important">centos</code>下，那么运行如下命令，搞定。强烈建议运行完成之后，重启机器，看是否设置成功。</p>
<pre style="word-wrap:break-word; margin-top:10px; margin-bottom:10px; padding:0px; white-space:pre-wrap; color:rgb(51,51,51); font-size:14px; background-color:rgb(255,255,255)"><code class="hljs prolog hljs coffeescript cs" style="word-wrap:break-word; margin:auto; vertical-align:middle; display:block; height:auto; overflow-x:auto; color:rgb(0,0,0); font-family:&quot;font-size:12px !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:5px!important; line-height:1.5!important"><ol class="hljs-ln"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">[<span class="hljs-meta">root</span><span class="hljs-property" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-meta">@iZ94wb7tioqZ</span></span><span class="hljs-meta"> option_analysis</span>]<span class="hljs-comment" style="word-wrap:break-word; margin:0px; padding:0px; color:green; line-height:1.8"><span class="hljs-meta"># pm2 save</span></span><span class="hljs-meta"> </span><br style="word-wrap:break-word"><span class="hljs-meta">​[root</span><span class="hljs-property" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-meta">@iZ94wb7tioqZ</span></span><span class="hljs-meta"> option_analysis]</span><span class="hljs-comment" style="word-wrap:break-word; margin:0px; padding:0px; color:green; line-height:1.8"><span class="hljs-meta"># pm2 startup centos</span></span><span class="hljs-meta"> </span><br style="word-wrap:break-word"><span class="hljs-meta">​[</span><span class="hljs-symbol" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,176,232); line-height:1.8"><span class="hljs-meta">PM2</span></span><span class="hljs-meta">] </span><span class="hljs-symbol" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,176,232); line-height:1.8"><span class="hljs-meta">Generating</span></span><span class="hljs-meta"> system init script </span><span class="hljs-keyword" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.8"><span class="hljs-meta">in</span></span><span class="hljs-meta"> /etc/init.d/pm2-init.sh</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">[<span class="hljs-symbol" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,176,232); line-height:1.8"><span class="hljs-meta">PM2</span></span>] <span class="hljs-symbol" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,176,232); line-height:1.8">Making</span> script booting at startup...</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">[<span class="hljs-symbol" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,176,232); line-height:1.8"><span class="hljs-meta">PM2</span></span>] /<span class="hljs-reserved" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-keyword">var</span></span>/<span class="hljs-keyword">lock</span>/subsys/pm2-init.sh lockfile has been added</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">[<span class="hljs-symbol" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,176,232); line-height:1.8"><span class="hljs-meta">PM2</span></span>] -centos- <span class="hljs-symbol" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,176,232); line-height:1.8">Using</span> the <span class="hljs-attribute" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8">command</span>:</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="5"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">      su -c <span class="hljs-string" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-string">"chmod +x /etc/init.d/pm2-init.sh; chkconfig --add pm2-init.sh"</span></span> <br style="word-wrap:break-word">​[<span class="hljs-symbol" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,176,232); line-height:1.8">PM2</span>] <span class="hljs-symbol" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,176,232); line-height:1.8">Done</span>.</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="6"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">[<span class="hljs-meta">root</span><span class="hljs-property" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-meta">@iZ94wb7tioqZ</span></span><span class="hljs-meta"> option_analysis</span>]<span class="hljs-comment" style="word-wrap:break-word; margin:0px; padding:0px; color:green; line-height:1.8"><span class="hljs-meta"># pm2 save</span></span><span class="hljs-meta"> </span><br style="word-wrap:break-word"><span class="hljs-meta">​[</span><span class="hljs-symbol" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,176,232); line-height:1.8"><span class="hljs-meta">PM2</span></span><span class="hljs-meta">] </span><span class="hljs-symbol" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,176,232); line-height:1.8"><span class="hljs-meta">Dumping</span></span><span class="hljs-meta"> processes</span></div></div></li></ol></code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre>
<h2 id="远程部署" style="word-wrap:break-word; margin:10px 0px; padding:0px; color:rgb(57,154,178); line-height:1.5; font-size:21px; font-family:verdana,Arial,Helvetica,sans-serif"><a name="t23"></a><a name="t23"></a>
远程部署</h2>
<p style="word-wrap:break-word; margin:10px auto; padding-top:0px; padding-bottom:0px; font-size:13px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif">
可参考官方文档，配置也不复杂，用到的时候再来填写这里的坑。TODO</p>
<p style="word-wrap:break-word; margin:10px auto; padding-top:0px; padding-bottom:0px; font-size:13px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif">
官方文档：<a target="_blank" href="http://pm2.keymetrics.io/docs/usage/deployment/#getting-started" rel="nofollow" class="uri" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,0,0); border-bottom:1px dotted rgb(51,51,51)">http://pm2.keymetrics.io/docs/usage/deployment/#getting-started</a></p>
<h2 id="监控monitor" style="word-wrap:break-word; margin:10px 0px; padding:0px; color:rgb(57,154,178); line-height:1.5; font-size:21px; font-family:verdana,Arial,Helvetica,sans-serif"><a name="t24"></a><a name="t24"></a>
监控(monitor)</h2>
<p style="word-wrap:break-word; margin:10px auto; padding-top:0px; padding-bottom:0px; font-size:13px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif">
运行如下命令，查看当前通过pm2运行的进程的状态。</p>
<pre style="word-wrap:break-word; margin-top:10px; margin-bottom:10px; padding:0px; white-space:pre-wrap; color:rgb(51,51,51); font-size:14px; background-color:rgb(255,255,255)"><code class="hljs nginx hljs" style="word-wrap:break-word; margin:auto; vertical-align:middle; display:block; height:auto; overflow-x:auto; color:rgb(0,0,0); font-family:&quot;font-size:12px !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:5px!important; line-height:1.5!important"><span class="hljs-attribute" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8">pm2</span> monit</code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre>
<p style="word-wrap:break-word; margin:10px auto; padding-top:0px; padding-bottom:0px; font-size:13px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif">
看到类似输出</p>
<pre style="word-wrap:break-word; margin-top:10px; margin-bottom:10px; padding:0px; white-space:pre-wrap; color:rgb(51,51,51); font-size:14px; background-color:rgb(255,255,255)"><code class="hljs prolog hljs cs" style="word-wrap:break-word; margin:auto; vertical-align:middle; display:block; height:auto; overflow-x:auto; color:rgb(0,0,0); font-family:&quot;font-size:12px !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:5px!important; line-height:1.5!important"><ol class="hljs-ln" style="width:1393px"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">[<span class="hljs-meta">root@oneday-dev0 server</span>]<span class="hljs-preprocessor" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-meta"># pm2 monit</span></span><span class="hljs-meta"> ⌬</span><br style="word-wrap:break-word"><span class="hljs-meta">​ </span><span class="hljs-symbol" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,176,232); line-height:1.8"><span class="hljs-meta">PM2</span></span><span class="hljs-meta"> monitoring (</span><span class="hljs-symbol" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,176,232); line-height:1.8"><span class="hljs-meta">To</span></span><span class="hljs-meta"> go further check </span><span class="hljs-keyword" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.8"><span class="hljs-meta">out</span></span><span class="hljs-meta"> https:</span><span class="hljs-comment" style="word-wrap:break-word; margin:0px; padding:0px; color:green; line-height:1.8"><span class="hljs-meta">//app.keymetrics.io) </span></span><span class="hljs-meta"> [                              ] </span><span class="hljs-number" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-meta">0</span></span><span class="hljs-meta"> </span><span class="hljs-comment" style="word-wrap:break-word; margin:0px; padding:0px; color:green; line-height:1.8"><span class="hljs-meta">%</span></span><span class="hljs-meta"> ⌬ </span><br style="word-wrap:break-word"><span class="hljs-meta">​</span><span class="hljs-symbol" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,176,232); line-height:1.8"><span class="hljs-meta">PM2</span></span><span class="hljs-meta"> monitoring (</span><span class="hljs-symbol" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,176,232); line-height:1.8"><span class="hljs-meta">To</span></span><span class="hljs-meta"> go further check o[|||||||||||||||               ] </span><span class="hljs-number" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-meta">196.285</span></span><span class="hljs-meta"> </span><span class="hljs-symbol" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,176,232); line-height:1.8"><span class="hljs-meta">MB</span></span><span class="hljs-meta"> </span><br style="word-wrap:break-word"><span class="hljs-meta">​● fis-receiver                        [                              ] </span><span class="hljs-number" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-meta">0</span></span><span class="hljs-meta"> </span><span class="hljs-comment" style="word-wrap:break-word; margin:0px; padding:0px; color:green; line-height:1.8"><span class="hljs-meta">%</span></span><span class="hljs-meta"> [</span><span class="hljs-number" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-meta">1</span></span><span class="hljs-meta">] [fork_mode]                        [|||||                         ] </span><span class="hljs-number" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-meta">65.773</span></span><span class="hljs-meta"> </span><span class="hljs-symbol" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,176,232); line-height:1.8"><span class="hljs-meta">MB</span></span><span class="hljs-meta"> </span><br style="word-wrap:break-word"><span class="hljs-meta">​● www                                 [                              ] </span><span class="hljs-number" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-meta">0</span></span><span class="hljs-meta"> </span><span class="hljs-comment" style="word-wrap:break-word; margin:0px; padding:0px; color:green; line-height:1.8"><span class="hljs-meta">%</span></span><span class="hljs-meta"> [</span><span class="hljs-number" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-meta">2</span></span><span class="hljs-meta">] [fork_mode]                        [|||||                         ] </span><span class="hljs-number" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-meta">74.426</span></span><span class="hljs-meta"> </span><span class="hljs-symbol" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,176,232); line-height:1.8"><span class="hljs-meta">MB</span></span><span class="hljs-meta"> </span><br style="word-wrap:break-word"><span class="hljs-meta">​● oc-server                           [                              ] </span><span class="hljs-number" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-meta">0</span></span><span class="hljs-meta"> </span><span class="hljs-comment" style="word-wrap:break-word; margin:0px; padding:0px; color:green; line-height:1.8"><span class="hljs-meta">%</span></span><span class="hljs-meta"> [</span><span class="hljs-number" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-meta">3</span></span><span class="hljs-meta">] [fork_mode]                        [||||                          ] </span><span class="hljs-number" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-meta">57.801</span></span><span class="hljs-meta"> </span><span class="hljs-symbol" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,176,232); line-height:1.8"><span class="hljs-meta">MB</span></span><span class="hljs-meta"> </span><br style="word-wrap:break-word"><span class="hljs-meta">​● pm2-http-</span><span class="hljs-keyword" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.8"><span class="hljs-meta">interface</span></span><span class="hljs-meta"> [                              ] stopped</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">[<span class="hljs-number" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-meta">4</span></span>] [fork_mode]                        [                              ] <span class="hljs-number" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-number">0</span></span> <span class="hljs-symbol" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,176,232); line-height:1.8">B</span> <br style="word-wrap:break-word">​● start-production</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">[<span class="hljs-number" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-meta">5</span></span>] [fork_mode]</div></div></li></ol></code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre>
<h2 id="内存使用超过上限自动重启" style="word-wrap:break-word; margin:10px 0px; padding:0px; color:rgb(57,154,178); line-height:1.5; font-size:21px; font-family:verdana,Arial,Helvetica,sans-serif"><a name="t25"></a><a name="t25"></a>
内存使用超过上限自动重启</h2>
<p style="word-wrap:break-word; margin:10px auto; padding-top:0px; padding-bottom:0px; font-size:13px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif">
如果想要你的应用，<span style="word-wrap:break-word"><span style="word-wrap:break-word; color:rgb(76,51,229)">在超过使用内存上限后自动重启，那么可以加上</span></span><code style="word-wrap:break-word; margin:1px 5px; line-height:1.8; vertical-align:middle; display:inline-block; font-family:&quot;font-size:12px !important;background-color:#F5F5F5 !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:0px 5px!important"><span style="word-wrap:break-word"><span style="word-wrap:break-word; color:rgb(76,51,229)">--max-memory-restart</span></span></code><span style="word-wrap:break-word"><span style="word-wrap:break-word; color:rgb(76,51,229)">参数</span></span>。（有对应的配置项）</p>
<pre class="powershell" style="word-wrap:break-word; margin-top:10px; margin-bottom:10px; padding:0px; white-space:pre-wrap; color:rgb(51,51,51); font-size:14px; background-color:rgb(255,255,255)" name="code"><code class="hljs hljs sql" style="word-wrap:break-word; margin:auto; vertical-align:middle; display:block; height:auto; overflow-x:auto; color:rgb(0,0,0); font-family:&quot;font-size:12px !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:5px!important; line-height:1.5!important">pm2 <span class="hljs-operator" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-keyword" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.8"><span class="hljs-keyword">start</span></span> <span class="hljs-keyword">big</span>-array.js <span class="hljs-comment">--</span><span class="hljs-aggregate" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-comment">max</span></span><span class="hljs-comment">-memory-restart </span></span><span class="hljs-number" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-comment">20</span></span><span class="hljs-operator" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-comment">M</span></span></code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre>
<h2 id="更新pm2" style="word-wrap:break-word; margin:10px 0px; padding:0px; color:rgb(57,154,178); line-height:1.5; font-size:21px; font-family:verdana,Arial,Helvetica,sans-serif"><a name="t26"></a><a name="t26"></a>
更新pm2</h2>
<p style="word-wrap:break-word; margin:10px auto; padding-top:0px; padding-bottom:0px; font-size:13px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif">
官方文档：<a target="_blank" href="http://pm2.keymetrics.io/docs/usage/update-pm2/#updating-pm2" rel="nofollow" class="uri" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,0,0); border-bottom:1px dotted rgb(51,51,51)">http://pm2.keymetrics.io/docs/usage/update-pm2/#updating-pm2</a></p>
<pre style="word-wrap:break-word; margin-top:10px; margin-bottom:10px; padding:0px; white-space:pre-wrap; color:rgb(51,51,51); font-size:14px; background-color:rgb(255,255,255)"><code class="hljs ruby hljs" style="word-wrap:break-word; margin:auto; vertical-align:middle; display:block; height:auto; overflow-x:auto; color:rgb(0,0,0); font-family:&quot;font-size:12px !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:5px!important; line-height:1.5!important"><span class="hljs-variable" style="word-wrap:break-word; margin:0px; padding:0px; color:green; line-height:1.8">$ </span>pm2 save <span class="hljs-comment" style="word-wrap:break-word; margin:0px; padding:0px; color:green; line-height:1.8"><span class="hljs-comment"># 记得保存进程状态</span></span><span class="hljs-comment"> </span><br style="word-wrap:break-word"><span class="hljs-comment">​</span><br style="word-wrap:break-word"><span class="hljs-comment">​</span><span class="hljs-variable" style="word-wrap:break-word; margin:0px; padding:0px; color:green; line-height:1.8"><span class="hljs-comment">$ </span></span><span class="hljs-comment">npm install pm2 -g </span><br style="word-wrap:break-word"><span class="hljs-comment">​</span><br style="word-wrap:break-word"><span class="hljs-comment">​</span><span class="hljs-variable" style="word-wrap:break-word; margin:0px; padding:0px; color:green; line-height:1.8"><span class="hljs-comment">$ </span></span><span class="hljs-comment">pm2 update</span><br style="word-wrap:break-word"><span class="hljs-comment">​</span></code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre>
<h2 id="pm2-nginx" style="word-wrap:break-word; margin:10px 0px; padding:0px; color:rgb(57,154,178); line-height:1.5; font-size:21px; font-family:verdana,Arial,Helvetica,sans-serif"><a name="t27"></a><a name="t27"></a>
pm2 + nginx</h2>
<p style="word-wrap:break-word; margin:10px auto; padding-top:0px; padding-bottom:0px; font-size:13px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif">
无非就是在nginx上做个反向代理配置，直接贴配置。</p>
<pre class="nginx" style="word-wrap:break-word; margin-top:10px; margin-bottom:10px; padding:0px; white-space:pre-wrap; color:rgb(51,51,51); font-size:14px; background-color:rgb(255,255,255)" name="code"><code class="hljs hljs php" style="word-wrap:break-word; margin:auto; vertical-align:middle; display:block; height:auto; overflow-x:auto; color:rgb(0,0,0); font-family:&quot;font-size:12px !important;border:1px solid #CCCCCC !important;border-radius:3px !important;&quot;; padding:5px!important; line-height:1.5!important"><ol class="hljs-ln" style="width:3770px"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"> <span class="hljs-attribute" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8">upstream</span> my_nodejs_upstream { <span class="hljs-attribute" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8">server</span> <span class="hljs-number" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>:<span class="hljs-number">3001</span></span>;</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">} <span class="hljs-section" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8">server</span> { <span class="hljs-attribute" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8">listen</span> <span class="hljs-number" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-number">80</span></span>; <span class="hljs-attribute" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8">server_name</span> my_nodejs_server; <span class="hljs-attribute" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8">root</span> /home/www/project_root; <span class="hljs-attribute" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8">location</span> / { <span class="hljs-attribute" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8">proxy_set_header</span> X-Forwarded-<span class="hljs-keyword">For</span> <span class="hljs-variable" style="word-wrap:break-word; margin:0px; padding:0px; color:green; line-height:1.8">$proxy_add_x_forwarded_for</span>; <span class="hljs-attribute" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8">proxy_set_header</span> Host <span class="hljs-variable" style="word-wrap:break-word; margin:0px; padding:0px; color:green; line-height:1.8">$http_host</span>; <span class="hljs-attribute" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8">proxy_set_header</span> X-NginX-Proxy <span class="hljs-literal" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-built_in" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.8"><span class="hljs-keyword">true</span></span></span>; <span class="hljs-attribute" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8">proxy_http_version</span> <span class="hljs-number" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-number">1</span></span><span class="hljs-number">.</span><span class="hljs-number" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-number">1</span></span>; <span class="hljs-attribute" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8">proxy_set_header</span> Upgrade <span class="hljs-variable" style="word-wrap:break-word; margin:0px; padding:0px; color:green; line-height:1.8">$http_upgrade</span>; <span class="hljs-attribute" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8">proxy_set_header</span> Connection <span class="hljs-string" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-string">"upgrade"</span></span>; <span class="hljs-attribute" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8">proxy_max_temp_file_size</span> <span class="hljs-number" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-number">0</span></span>; <span class="hljs-attribute" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8">proxy_pass</span> <span class="hljs-url" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8">http:<span class="hljs-comment">//my_nodejs_upstream/</span></span><span class="hljs-comment">; </span><span class="hljs-attribute" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-comment">proxy_redirect</span></span><span class="hljs-comment"> </span><span class="hljs-literal" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-built_in" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.8"><span class="hljs-comment">off</span></span></span><span class="hljs-comment">; </span><span class="hljs-attribute" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(163,21,21); line-height:1.8"><span class="hljs-comment">proxy_read_timeout</span></span><span class="hljs-comment"> </span><span class="hljs-number" style="word-wrap:break-word; margin:0px; padding:0px; line-height:1.8"><span class="hljs-comment">240s</span></span><span class="hljs-comment">;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    }</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">}</div></div></li></ol></code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre>
<p style="word-wrap:break-word; margin:10px auto; padding-top:0px; padding-bottom:0px; font-size:13px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif">
官方文档：<a target="_blank" href="http://pm2.keymetrics.io/docs/tutorials/pm2-nginx-production-setup" rel="nofollow" class="uri" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,0,0); border-bottom:1px dotted rgb(51,51,51)">http://pm2.keymetrics.io/docs/tutorials/pm2-nginx-production-setup</a></p>
<span style="font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">​</span>
<h2 id="pm2编程接口" style="word-wrap:break-word; margin:10px 0px; padding:0px; color:rgb(57,154,178); line-height:1.5; font-size:21px; font-family:verdana,Arial,Helvetica,sans-serif"><a name="t28"></a><a name="t28"></a>
pm2编程接口</h2>
<p style="word-wrap:break-word; margin:10px auto; padding-top:0px; padding-bottom:0px; font-size:13px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif">
如果想把pm2的进程监控，跟其他自动化流程整合起来，pm2的编程接口就很有用了。细节可参考官方文档：<br style="word-wrap:break-word; margin:0px; padding:0px">
<a target="_blank" href="http://pm2.keymetrics.io/docs/usage/pm2-api/" rel="nofollow" class="uri" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,0,0); border-bottom:1px dotted rgb(51,51,51)">http://pm2.keymetrics.io/docs/usage/pm2-api/</a></p>
<h2 id="模块扩展系统" style="word-wrap:break-word; margin:10px 0px; padding:0px; color:rgb(57,154,178); line-height:1.5; font-size:21px; font-family:verdana,Arial,Helvetica,sans-serif"><a name="t29"></a><a name="t29"></a>
模块扩展系统</h2>
<p style="word-wrap:break-word; margin:10px auto; padding-top:0px; padding-bottom:0px; font-size:13px; color:rgb(51,51,51); font-family:verdana,Arial,Helvetica,sans-serif">
pm2支持第三方扩展，比如常用的log rotate等。可参考<a target="_blank" href="http://pm2.keymetrics.io/docs/advanced/pm2-module-system/" rel="nofollow" style="word-wrap:break-word; margin:0px; padding:0px; color:rgb(0,0,0); border-bottom:1px dotted rgb(51,51,51)">官方文档</a>。<br style="word-wrap:break-word">
​<br style="word-wrap:break-word">
​<br style="word-wrap:break-word">
​<br style="word-wrap:break-word">
​</p>
<h4 id="title-1" style="word-wrap:break-word; margin:-90px 0px 0px; padding:90px 30px 5px; border:0px; font-family:&quot;font-size:1.6rem;outline:0px;vertical-align:baseline;line-height:44.8px;color:#444444;&quot;">
二、安装</h4>
<p style="word-wrap:break-word; margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; font-family:&quot;font-size:15px;outline:0px;vertical-align:baseline;word-break:break-all;text-indent:2em;color:#444444;&quot;">
<a target="_blank" href="http://lib.csdn.net/base/linux" rel="nofollow" class="replace_word" title="Linux知识库" style="word-wrap:break-word; color:rgb(223,52,52); font-weight:bold">Linux</a>&nbsp;Binaries下载地址：<a target="_blank" href="https://blog.linuxeye.com/wp-content/themes/begin/inc/go.php?url=https://nodejs.org/dist" rel="nofollow" style="word-wrap:break-word; color:rgb(255,153,0)">https://nodejs.org/dist</a></p>
<div class="dp-highlighter" style="word-wrap:break-word; font-family:&quot;font-size:15px;background-color:#E7E5DC;width:689.578px;overflow:auto;padding:5px;margin:10px auto;position:relative;white-space:normal;border:1px dashed #CCCCCC;outline:0px;vertical-align:baseline;word-break:break-all;color:#444444;&quot;">
<ol class="dp-py" start="1" style="word-wrap:break-word; margin:0px 0px 1px -15px; padding:2px; border:0px; list-style:none; color:rgb(102,102,102); font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline; word-break:break-all">
<li class="alt" style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; color:inherit; line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
cd&nbsp;<a target="_blank" href="https://blog.linuxeye.com/wp-content/themes/begin/inc/go.php?url=http://oneinstack.com" rel="nofollow" style="word-wrap:break-word; color:rgb(255,153,0); background:none; border:none; padding:0px; margin:0px">oneinstack</a>/src</li><li style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; background-color:rgb(248,248,248); color:rgb(92,92,92); line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
wget https://nodejs.org/dist/v4.2.4/node-v4.2.4-linux-x64.tar.gz</li><li class="alt" style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; color:inherit; line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
tar&nbsp;xzf&nbsp;node-v4.2.4-linux-x64.tar.gz</li><li style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; background-color:rgb(248,248,248); color:rgb(92,92,92); line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
cp&nbsp;node-v4.2.4-linux-x64/bin/node&nbsp;/usr/local/bin/</li><li class="alt" style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; color:inherit; line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
cp&nbsp;-R&nbsp;node-v4.2.4-linux-x64/lib/node_modules&nbsp;/usr/local/lib/</li><li style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; background-color:rgb(248,248,248); color:rgb(92,92,92); line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
ln&nbsp;-s&nbsp;/usr/local/lib/node_modules/npm/bin/npm-cli.js&nbsp;/usr/local/bin/npm</li><li class="alt" style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; color:inherit; line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
npm&nbsp;install&nbsp;pm2@latest&nbsp;-g #安装最新版本pm2模块</li></ol>
</div>
<p style="word-wrap:break-word; margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; font-family:&quot;font-size:15px;outline:0px;vertical-align:baseline;word-break:break-all;text-indent:2em;color:#444444;&quot;">
PS: 如果你的主机无法连接公网，先找到能连公网的主机安装上面的方法安装pm2，然后拷贝到你要安装的主机。拷贝如下目录：</p>
<div class="dp-highlighter" style="word-wrap:break-word; font-family:&quot;font-size:15px;background-color:#E7E5DC;width:689.578px;overflow:auto;padding:5px;margin:10px auto;position:relative;white-space:normal;border:1px dashed #CCCCCC;outline:0px;vertical-align:baseline;word-break:break-all;color:#444444;&quot;">
<ol class="dp-py" start="1" style="word-wrap:break-word; margin:0px 0px 1px -15px; padding:2px; border:0px; list-style:none; color:rgb(102,102,102); font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline; word-break:break-all">
<li class="alt" style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; color:inherit; line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
/usr/local/bin/node</li><li style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; background-color:rgb(248,248,248); color:rgb(92,92,92); line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
/usr/local/lib/node_modules</li></ol>
</div>
<p style="word-wrap:break-word; margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; font-family:&quot;font-size:15px;outline:0px;vertical-align:baseline;word-break:break-all;text-indent:2em;color:#444444;&quot;">
<span style="word-wrap:break-word; border:0px; font-family:inherit; font-style:inherit; margin:0px; outline:0px; padding:0px; vertical-align:baseline; color:rgb(255,0,0)">再创建相关软连接</span></p>
<span class="directory" style="word-wrap:break-word; border-width:0px 0px 0px 5px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:solid; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(47,136,154); font-family:&quot;font-size:15px;margin:8px -21px;outline:0px;padding:0px;vertical-align:baseline;float:left;height:30px;color:#444444;&quot;"></span>
<h4 id="title-2" style="word-wrap:break-word; margin:-90px 0px 0px; padding:90px 30px 5px; border:0px; font-family:&quot;font-size:1.6rem;outline:0px;vertical-align:baseline;line-height:44.8px;color:#444444;&quot;">
<img class="ke-anchor" src="http://blog.chinaunix.net/kindeditor/themes/common/anchor.gif" alt="" style="word-wrap:break-word; border:1px dashed rgb(102,102,102); width:16px; height:16px">三、PM2常用命令</h4>
<p style="word-wrap:break-word; margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; font-family:&quot;font-size:15px;outline:0px;vertical-align:baseline;word-break:break-all;text-indent:2em;color:#444444;&quot;">
假设你现在已经写好了一个app.<a target="_blank" href="http://lib.csdn.net/base/javascript" rel="nofollow" class="replace_word" title="JavaScript知识库" style="word-wrap:break-word; color:rgb(223,52,52); font-weight:bold">js</a>的文件，需要启动，你可以使用pm2进行管理</p>
<h4 style="word-wrap:break-word; margin:-90px 0px 0px; padding:90px 30px 5px; border:0px; font-family:&quot;font-size:1.6rem;outline:0px;vertical-align:baseline;line-height:44.8px;color:#444444;&quot;">
<img class="ke-anchor" src="http://blog.chinaunix.net/kindeditor/themes/common/anchor.gif" alt="" style="word-wrap:break-word; border:1px dashed rgb(102,102,102); width:16px; height:16px">1. 启动</h4>
<div class="dp-highlighter" style="word-wrap:break-word; font-family:&quot;font-size:15px;background-color:#E7E5DC;width:689.578px;overflow:auto;padding:5px;margin:10px auto;position:relative;white-space:normal;border:1px dashed #CCCCCC;outline:0px;vertical-align:baseline;word-break:break-all;color:#444444;&quot;">
<div class="bar" style="word-wrap:break-word; padding:2px; border:0px; font-family:inherit; font-style:inherit; margin:0px; outline:0px; vertical-align:baseline">
</div>
<ol class="dp-py" start="1" style="word-wrap:break-word; margin:0px 0px 1px -15px; padding:2px; border:0px; list-style:none; color:rgb(102,102,102); font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline; word-break:break-all">
<li class="alt" style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; color:inherit; line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
# pm2&nbsp;start&nbsp;app.js</li><li style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; background-color:rgb(248,248,248); color:rgb(92,92,92); line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
# pm2&nbsp;start&nbsp;app.js&nbsp;--name&nbsp;my-api&nbsp;&nbsp;&nbsp;<span class="comment" style="word-wrap:break-word; color:green; margin:0px; padding:0px; border:0px; background-color:inherit; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">#my-api为PM2进程名称</span></li><li class="alt" style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; color:inherit; line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
# pm2&nbsp;start&nbsp;app.js&nbsp;-i&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="word-wrap:break-word; color:green; margin:0px; padding:0px; border:0px; background-color:inherit; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">#根据CPU核数启动进程个数</span></li><li style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; background-color:rgb(248,248,248); color:rgb(92,92,92); line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
# pm2&nbsp;start&nbsp;app.js&nbsp;--watch&nbsp;&nbsp;&nbsp;<span class="comment" style="word-wrap:break-word; color:green; margin:0px; padding:0px; border:0px; background-color:inherit; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">#实时监控app.js的方式启动，当app.js文件有变动时，pm2会自动reload</span></li></ol>
</div>
<h4 style="word-wrap:break-word; margin:-90px 0px 0px; padding:90px 30px 5px; border:0px; font-family:&quot;font-size:1.6rem;outline:0px;vertical-align:baseline;line-height:44.8px;color:#444444;&quot;">
<img class="ke-anchor" src="http://blog.chinaunix.net/kindeditor/themes/common/anchor.gif" alt="" style="word-wrap:break-word; border:1px dashed rgb(102,102,102); width:16px; height:16px">2. 查看进程</h4>
<div class="dp-highlighter" style="word-wrap:break-word; font-family:&quot;font-size:15px;background-color:#E7E5DC;width:689.578px;overflow:auto;padding:5px;margin:10px auto;position:relative;white-space:normal;border:1px dashed #CCCCCC;outline:0px;vertical-align:baseline;word-break:break-all;color:#444444;&quot;">
<div class="bar" style="word-wrap:break-word; padding:2px; border:0px; font-family:inherit; font-style:inherit; margin:0px; outline:0px; vertical-align:baseline">
</div>
<ol class="dp-py" start="1" style="word-wrap:break-word; margin:0px 0px 1px -15px; padding:2px; border:0px; list-style:none; color:rgb(102,102,102); font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline; word-break:break-all">
<li class="alt" style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; color:inherit; line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
# pm2&nbsp;<span class="builtins" style="word-wrap:break-word; color:rgb(255,20,147); margin:0px; padding:0px; border:0px; background-color:inherit; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">list</span></li><li style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; background-color:rgb(248,248,248); color:rgb(92,92,92); line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
# pm2&nbsp;show&nbsp;0&nbsp;或者&nbsp;<span class="comment" style="word-wrap:break-word; color:green; margin:0px; padding:0px; border:0px; background-color:inherit; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">#&nbsp;pm2&nbsp;info&nbsp;0&nbsp;&nbsp;#查看进程详细信息，0为PM2进程id</span></li></ol>
</div>
<h4 style="word-wrap:break-word; margin:-90px 0px 0px; padding:90px 30px 5px; border:0px; font-family:&quot;font-size:1.6rem;outline:0px;vertical-align:baseline;line-height:44.8px;color:#444444;&quot;">
<img class="ke-anchor" src="http://blog.chinaunix.net/kindeditor/themes/common/anchor.gif" alt="" style="word-wrap:break-word; border:1px dashed rgb(102,102,102); width:16px; height:16px">3. 监控</h4>
<div class="dp-highlighter" style="word-wrap:break-word; font-family:&quot;font-size:15px;background-color:#E7E5DC;width:689.578px;overflow:auto;padding:5px;margin:10px auto;position:relative;white-space:normal;border:1px dashed #CCCCCC;outline:0px;vertical-align:baseline;word-break:break-all;color:#444444;&quot;">
<div class="bar" style="word-wrap:break-word; padding:2px; border:0px; font-family:inherit; font-style:inherit; margin:0px; outline:0px; vertical-align:baseline">
</div>
<ol class="dp-py" start="1" style="word-wrap:break-word; margin:0px 0px 1px -15px; padding:2px; border:0px; list-style:none; color:rgb(102,102,102); font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline; word-break:break-all">
<li class="alt" style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; color:inherit; line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
<span class="comment" style="word-wrap:break-word; color:green; margin:0px; padding:0px; border:0px; background-color:inherit; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">#&nbsp;pm2&nbsp;monit</span></li></ol>
</div>
<h4 style="word-wrap:break-word; margin:-90px 0px 0px; padding:90px 30px 5px; border:0px; font-family:&quot;font-size:1.6rem;outline:0px;vertical-align:baseline;line-height:44.8px;color:#444444;&quot;">
<img class="ke-anchor" src="http://blog.chinaunix.net/kindeditor/themes/common/anchor.gif" alt="" style="word-wrap:break-word; border:1px dashed rgb(102,102,102); width:16px; height:16px">4. 停止</h4>
<div class="dp-highlighter" style="word-wrap:break-word; font-family:&quot;font-size:15px;background-color:#E7E5DC;width:689.578px;overflow:auto;padding:5px;margin:10px auto;position:relative;white-space:normal;border:1px dashed #CCCCCC;outline:0px;vertical-align:baseline;word-break:break-all;color:#444444;&quot;">
<div class="bar" style="word-wrap:break-word; padding:2px; border:0px; font-family:inherit; font-style:inherit; margin:0px; outline:0px; vertical-align:baseline">
</div>
<ol class="dp-py" start="1" style="word-wrap:break-word; margin:0px 0px 1px -15px; padding:2px; border:0px; list-style:none; color:rgb(102,102,102); font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline; word-break:break-all">
<li class="alt" style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; color:inherit; line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
<span class="comment" style="word-wrap:break-word; color:green; margin:0px; padding:0px; border:0px; background-color:inherit; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">#&nbsp;pm2&nbsp;stop&nbsp;all&nbsp;&nbsp;#停止PM2列表中所有的进程</span></li><li style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; background-color:rgb(248,248,248); color:rgb(92,92,92); line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
<span class="comment" style="word-wrap:break-word; color:green; margin:0px; padding:0px; border:0px; background-color:inherit; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">#&nbsp;pm2&nbsp;stop&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;#停止PM2列表中进程为0的进程</span></li></ol>
</div>
<h4 style="word-wrap:break-word; margin:-90px 0px 0px; padding:90px 30px 5px; border:0px; font-family:&quot;font-size:1.6rem;outline:0px;vertical-align:baseline;line-height:44.8px;color:#444444;&quot;">
<img class="ke-anchor" src="http://blog.chinaunix.net/kindeditor/themes/common/anchor.gif" alt="" style="word-wrap:break-word; border:1px dashed rgb(102,102,102); width:16px; height:16px">5. 重载</h4>
<div class="dp-highlighter" style="word-wrap:break-word; font-family:&quot;font-size:15px;background-color:#E7E5DC;width:689.578px;overflow:auto;padding:5px;margin:10px auto;position:relative;white-space:normal;border:1px dashed #CCCCCC;outline:0px;vertical-align:baseline;word-break:break-all;color:#444444;&quot;">
<div class="bar" style="word-wrap:break-word; padding:2px; border:0px; font-family:inherit; font-style:inherit; margin:0px; outline:0px; vertical-align:baseline">
</div>
<ol class="dp-py" start="1" style="word-wrap:break-word; margin:0px 0px 1px -15px; padding:2px; border:0px; list-style:none; color:rgb(102,102,102); font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline; word-break:break-all">
<li class="alt" style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; color:inherit; line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
<span class="comment" style="word-wrap:break-word; color:green; margin:0px; padding:0px; border:0px; background-color:inherit; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">#&nbsp;pm2&nbsp;reload&nbsp;all&nbsp;&nbsp;&nbsp;&nbsp;#重载PM2列表中所有的进程</span></li><li style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; background-color:rgb(248,248,248); color:rgb(92,92,92); line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
<span class="comment" style="word-wrap:break-word; color:green; margin:0px; padding:0px; border:0px; background-color:inherit; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">#&nbsp;pm2&nbsp;reload&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#重载PM2列表中进程为0的进程</span></li></ol>
</div>
<h4 style="word-wrap:break-word; margin:-90px 0px 0px; padding:90px 30px 5px; border:0px; font-family:&quot;font-size:1.6rem;outline:0px;vertical-align:baseline;line-height:44.8px;color:#444444;&quot;">
<img class="ke-anchor" src="http://blog.chinaunix.net/kindeditor/themes/common/anchor.gif" alt="" style="word-wrap:break-word; border:1px dashed rgb(102,102,102); width:16px; height:16px">6. 重启</h4>
<div class="dp-highlighter" style="word-wrap:break-word; font-family:&quot;font-size:15px;background-color:#E7E5DC;width:689.578px;overflow:auto;padding:5px;margin:10px auto;position:relative;white-space:normal;border:1px dashed #CCCCCC;outline:0px;vertical-align:baseline;word-break:break-all;color:#444444;&quot;">
<div class="bar" style="word-wrap:break-word; padding:2px; border:0px; font-family:inherit; font-style:inherit; margin:0px; outline:0px; vertical-align:baseline">
</div>
<ol class="dp-py" start="1" style="word-wrap:break-word; margin:0px 0px 1px -15px; padding:2px; border:0px; list-style:none; color:rgb(102,102,102); font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline; word-break:break-all">
<li class="alt" style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; color:inherit; line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
<span class="comment" style="word-wrap:break-word; color:green; margin:0px; padding:0px; border:0px; background-color:inherit; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">#&nbsp;pm2&nbsp;restart&nbsp;all&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#重启PM2列表中所有的进程</span></li><li style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; background-color:rgb(248,248,248); color:rgb(92,92,92); line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
<span class="comment" style="word-wrap:break-word; color:green; margin:0px; padding:0px; border:0px; background-color:inherit; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">#&nbsp;pm2&nbsp;restart&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#重启PM2列表中进程为0的进程</span></li></ol>
</div>
<h4 style="word-wrap:break-word; margin:-90px 0px 0px; padding:90px 30px 5px; border:0px; font-family:&quot;font-size:1.6rem;outline:0px;vertical-align:baseline;line-height:44.8px;color:#444444;&quot;">
<img class="ke-anchor" src="http://blog.chinaunix.net/kindeditor/themes/common/anchor.gif" alt="" style="word-wrap:break-word; border:1px dashed rgb(102,102,102); width:16px; height:16px">7. 删除PM2进程</h4>
<div class="dp-highlighter" style="word-wrap:break-word; font-family:&quot;font-size:15px;background-color:#E7E5DC;width:689.578px;overflow:auto;padding:5px;margin:10px auto;position:relative;white-space:normal;border:1px dashed #CCCCCC;outline:0px;vertical-align:baseline;word-break:break-all;color:#444444;&quot;">
<div class="bar" style="word-wrap:break-word; padding:2px; border:0px; font-family:inherit; font-style:inherit; margin:0px; outline:0px; vertical-align:baseline">
</div>
<ol class="dp-py" start="1" style="word-wrap:break-word; margin:0px 0px 1px -15px; padding:2px; border:0px; list-style:none; color:rgb(102,102,102); font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline; word-break:break-all">
<li class="alt" style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; color:inherit; line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
<span class="comment" style="word-wrap:break-word; color:green; margin:0px; padding:0px; border:0px; background-color:inherit; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">#&nbsp;pm2&nbsp;delete&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#删除PM2列表中进程为0的进程</span></li><li style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; background-color:rgb(248,248,248); color:rgb(92,92,92); line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
<span class="comment" style="word-wrap:break-word; color:green; margin:0px; padding:0px; border:0px; background-color:inherit; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">#&nbsp;pm2&nbsp;delete&nbsp;all&nbsp;&nbsp;&nbsp;#删除PM2列表中所有的进程</span></li></ol>
</div>
<h4 style="word-wrap:break-word; margin:-90px 0px 0px; padding:90px 30px 5px; border:0px; font-family:&quot;font-size:1.6rem;outline:0px;vertical-align:baseline;line-height:44.8px;color:#444444;&quot;">
<img class="ke-anchor" src="http://blog.chinaunix.net/kindeditor/themes/common/anchor.gif" alt="" style="word-wrap:break-word; border:1px dashed rgb(102,102,102); width:16px; height:16px">8. 日志操作</h4>
<div class="dp-highlighter" style="word-wrap:break-word; font-family:&quot;font-size:15px;background-color:#E7E5DC;width:689.578px;overflow:auto;padding:5px;margin:10px auto;position:relative;white-space:normal;border:1px dashed #CCCCCC;outline:0px;vertical-align:baseline;word-break:break-all;color:#444444;&quot;">
<div class="bar" style="word-wrap:break-word; padding:2px; border:0px; font-family:inherit; font-style:inherit; margin:0px; outline:0px; vertical-align:baseline">
</div>
<ol class="dp-py" start="1" style="word-wrap:break-word; margin:0px 0px 1px -15px; padding:2px; border:0px; list-style:none; color:rgb(102,102,102); font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline; word-break:break-all">
<li class="alt" style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; color:inherit; line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
<span class="comment" style="word-wrap:break-word; color:green; margin:0px; padding:0px; border:0px; background-color:inherit; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">#&nbsp;pm2&nbsp;logs&nbsp;[--raw]&nbsp;&nbsp;&nbsp;#Display&nbsp;all&nbsp;processes&nbsp;logs&nbsp;in&nbsp;streaming</span></li><li style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; background-color:rgb(248,248,248); color:rgb(92,92,92); line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
<span class="comment" style="word-wrap:break-word; color:green; margin:0px; padding:0px; border:0px; background-color:inherit; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">#&nbsp;pm2&nbsp;flush&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#Empty&nbsp;all&nbsp;log&nbsp;file</span></li><li class="alt" style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; color:inherit; line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
<span class="comment" style="word-wrap:break-word; color:green; margin:0px; padding:0px; border:0px; background-color:inherit; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">#&nbsp;pm2&nbsp;reloadLogs&nbsp;&nbsp;&nbsp;&nbsp;#Reload&nbsp;all&nbsp;logs</span></li></ol>
</div>
<h4 style="word-wrap:break-word; margin:-90px 0px 0px; padding:90px 30px 5px; border:0px; font-family:&quot;font-size:1.6rem;outline:0px;vertical-align:baseline;line-height:44.8px;color:#444444;&quot;">
<img class="ke-anchor" src="http://blog.chinaunix.net/kindeditor/themes/common/anchor.gif" alt="" style="word-wrap:break-word; border:1px dashed rgb(102,102,102); width:16px; height:16px">9. 升级PM2</h4>
<div class="dp-highlighter" style="word-wrap:break-word; font-family:&quot;font-size:15px;background-color:#E7E5DC;width:689.578px;overflow:auto;padding:5px;margin:10px auto;position:relative;white-space:normal;border:1px dashed #CCCCCC;outline:0px;vertical-align:baseline;word-break:break-all;color:#444444;&quot;">
<div class="bar" style="word-wrap:break-word; padding:2px; border:0px; font-family:inherit; font-style:inherit; margin:0px; outline:0px; vertical-align:baseline">
</div>
<ol class="dp-py" start="1" style="word-wrap:break-word; margin:0px 0px 1px -15px; padding:2px; border:0px; list-style:none; color:rgb(102,102,102); font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline; word-break:break-all">
<li class="alt" style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; color:inherit; line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
<span class="comment" style="word-wrap:break-word; color:green; margin:0px; padding:0px; border:0px; background-color:inherit; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">#&nbsp;npm&nbsp;install&nbsp;pm2@lastest&nbsp;-g&nbsp;&nbsp;&nbsp;#安装最新的PM2版本</span></li><li style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; background-color:rgb(248,248,248); color:rgb(92,92,92); line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
<span class="comment" style="word-wrap:break-word; color:green; margin:0px; padding:0px; border:0px; background-color:inherit; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">#&nbsp;pm2&nbsp;updatePM2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#升级pm2</span></li></ol>
</div>
<h4 style="word-wrap:break-word; margin:-90px 0px 0px; padding:90px 30px 5px; border:0px; font-family:&quot;font-size:1.6rem;outline:0px;vertical-align:baseline;line-height:44.8px;color:#444444;&quot;">
<img class="ke-anchor" src="http://blog.chinaunix.net/kindeditor/themes/common/anchor.gif" alt="" style="word-wrap:break-word; border:1px dashed rgb(102,102,102); width:16px; height:16px">10. 更多命令参数请查看帮助</h4>
<div class="dp-highlighter" style="word-wrap:break-word; font-family:&quot;font-size:15px;background-color:#E7E5DC;width:689.578px;overflow:auto;padding:5px;margin:10px auto;position:relative;white-space:normal;border:1px dashed #CCCCCC;outline:0px;vertical-align:baseline;word-break:break-all;color:#444444;&quot;">
<div class="bar" style="word-wrap:break-word; padding:2px; border:0px; font-family:inherit; font-style:inherit; margin:0px; outline:0px; vertical-align:baseline">
</div>
<ol class="dp-py" start="1" style="word-wrap:break-word; margin:0px 0px 1px -15px; padding:2px; border:0px; list-style:none; color:rgb(102,102,102); font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline; word-break:break-all">
<li class="alt" style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; color:inherit; line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
<span class="comment" style="word-wrap:break-word; color:green; margin:0px; padding:0px; border:0px; background-color:inherit; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">#&nbsp;pm2&nbsp;--help</span></li></ol>
</div>
<span class="directory" style="word-wrap:break-word; border-width:0px 0px 0px 5px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:solid; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(47,136,154); font-family:&quot;font-size:15px;margin:8px -21px;outline:0px;padding:0px;vertical-align:baseline;float:left;height:30px;color:#444444;&quot;"></span>
<h4 id="title-3" style="word-wrap:break-word; margin:-90px 0px 0px; padding:90px 30px 5px; border:0px; font-family:&quot;font-size:1.6rem;outline:0px;vertical-align:baseline;line-height:44.8px;color:#444444;&quot;">
<img class="ke-anchor" src="http://blog.chinaunix.net/kindeditor/themes/common/anchor.gif" alt="" style="word-wrap:break-word; border:1px dashed rgb(102,102,102); width:16px; height:16px">四、PM2目录结构</h4>
<p style="word-wrap:break-word; margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; font-family:&quot;font-size:15px;outline:0px;vertical-align:baseline;word-break:break-all;text-indent:2em;color:#444444;&quot;">
默认的目录是：当前用于的家目录下的.pm2目录（此目录可以自定义，请参考：五、自定义启动文件），详细信息如下：</p>
<div class="dp-highlighter" style="word-wrap:break-word; font-family:&quot;font-size:15px;background-color:#E7E5DC;width:689.578px;overflow:auto;padding:5px;margin:10px auto;position:relative;white-space:normal;border:1px dashed #CCCCCC;outline:0px;vertical-align:baseline;word-break:break-all;color:#444444;&quot;">
<div class="bar" style="word-wrap:break-word; padding:2px; border:0px; font-family:inherit; font-style:inherit; margin:0px; outline:0px; vertical-align:baseline">
</div>
<ol class="dp-py" start="1" style="word-wrap:break-word; margin:0px 0px 1px -15px; padding:2px; border:0px; list-style:none; color:rgb(102,102,102); font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline; word-break:break-all">
<li class="alt" style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; color:inherit; line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
$HOME/.pm2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="word-wrap:break-word; color:green; margin:0px; padding:0px; border:0px; background-color:inherit; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">#will&nbsp;contain&nbsp;all&nbsp;PM2&nbsp;related&nbsp;files</span></li><li style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; background-color:rgb(248,248,248); color:rgb(92,92,92); line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
$HOME/.pm2/logs&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="word-wrap:break-word; color:green; margin:0px; padding:0px; border:0px; background-color:inherit; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">#will&nbsp;contain&nbsp;all&nbsp;applications&nbsp;logs</span></li><li class="alt" style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; color:inherit; line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
$HOME/.pm2/pids&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="word-wrap:break-word; color:green; margin:0px; padding:0px; border:0px; background-color:inherit; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">#will&nbsp;contain&nbsp;all&nbsp;applications&nbsp;pids</span></li><li style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; background-color:rgb(248,248,248); color:rgb(92,92,92); line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
$HOME/.pm2/pm2.log&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="word-wrap:break-word; color:green; margin:0px; padding:0px; border:0px; background-color:inherit; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">#PM2&nbsp;logs</span></li><li class="alt" style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; color:inherit; line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
$HOME/.pm2/pm2.pid&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="word-wrap:break-word; color:green; margin:0px; padding:0px; border:0px; background-color:inherit; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">#PM2&nbsp;pid</span></li><li style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; background-color:rgb(248,248,248); color:rgb(92,92,92); line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
$HOME/.pm2/rpc.sock&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="word-wrap:break-word; color:green; margin:0px; padding:0px; border:0px; background-color:inherit; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">#Socket&nbsp;file&nbsp;for&nbsp;remote&nbsp;commands</span></li><li class="alt" style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; color:inherit; line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
$HOME/.pm2/pub.sock&nbsp;&nbsp;&nbsp;<span class="comment" style="word-wrap:break-word; color:green; margin:0px; padding:0px; border:0px; background-color:inherit; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">#Socket&nbsp;file&nbsp;for&nbsp;publishable&nbsp;events</span></li><li style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; background-color:rgb(248,248,248); color:rgb(92,92,92); line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
$HOME/.pm2/conf.js&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="word-wrap:break-word; color:green; margin:0px; padding:0px; border:0px; background-color:inherit; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">#PM2&nbsp;Configuration</span></li></ol>
</div>
<span class="directory" style="word-wrap:break-word; border-width:0px 0px 0px 5px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:solid; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(47,136,154); font-family:&quot;font-size:15px;margin:8px -21px;outline:0px;padding:0px;vertical-align:baseline;float:left;height:30px;color:#444444;&quot;"></span>
<h4 id="title-4" style="word-wrap:break-word; margin:-90px 0px 0px; padding:90px 30px 5px; border:0px; font-family:&quot;font-size:1.6rem;outline:0px;vertical-align:baseline;line-height:44.8px;color:#444444;&quot;">
<img class="ke-anchor" src="http://blog.chinaunix.net/kindeditor/themes/common/anchor.gif" alt="" style="word-wrap:break-word; border:1px dashed rgb(102,102,102); width:16px; height:16px">五、自定义启动文件</h4>
<p style="word-wrap:break-word; margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; font-family:&quot;font-size:15px;outline:0px;vertical-align:baseline;word-break:break-all;text-indent:2em;color:#444444;&quot;">
创建一个test.json的示例文件，格式如下：</p>
<div class="dp-highlighter" style="word-wrap:break-word; font-family:&quot;font-size:15px;background-color:#E7E5DC;width:689.578px;overflow:auto;padding:5px;margin:10px auto;position:relative;white-space:normal;border:1px dashed #CCCCCC;outline:0px;vertical-align:baseline;word-break:break-all;color:#444444;&quot;">
<ol class="dp-py" start="1" style="word-wrap:break-word; margin:0px 0px 1px -15px; padding:2px; border:0px; list-style:none; color:rgb(102,102,102); font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline; word-break:break-all">
<li class="alt" style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; color:inherit; line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
{</li><li style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; background-color:rgb(248,248,248); color:rgb(92,92,92); line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
&nbsp;&nbsp;"apps":</li><li class="alt" style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; color:inherit; line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
&nbsp;&nbsp;&nbsp;&nbsp;{</li><li style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; background-color:rgb(248,248,248); color:rgb(92,92,92); line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"name":&nbsp;"test",</li><li class="alt" style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; color:inherit; line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"cwd":&nbsp;"/data/wwwroot/nodejs",</li><li style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; background-color:rgb(248,248,248); color:rgb(92,92,92); line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"script":&nbsp;"./test.sh",</li><li class="alt" style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; color:inherit; line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"exec_interpreter":&nbsp;"bash",</li><li style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; background-color:rgb(248,248,248); color:rgb(92,92,92); line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"min_uptime":&nbsp;"60s",</li><li class="alt" style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; color:inherit; line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"max_restarts":&nbsp;30,</li><li style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; background-color:rgb(248,248,248); color:rgb(92,92,92); line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"exec_mode"&nbsp;:&nbsp;"cluster_mode",</li><li class="alt" style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; color:inherit; line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"error_file"&nbsp;:&nbsp;"./test-err.log",</li><li style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; background-color:rgb(248,248,248); color:rgb(92,92,92); line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"out_file":&nbsp;"./test-out.log",</li><li class="alt" style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; color:inherit; line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"pid_file":&nbsp;"./test.pid"</li><li style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; background-color:rgb(248,248,248); color:rgb(92,92,92); line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"watch":&nbsp;false</li><li class="alt" style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; color:inherit; line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
&nbsp;&nbsp;&nbsp;&nbsp;}</li><li style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; background-color:rgb(248,248,248); color:rgb(92,92,92); line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
}</li></ol>
</div>
<p style="word-wrap:break-word; margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; font-family:&quot;font-size:15px;outline:0px;vertical-align:baseline;word-break:break-all;text-indent:2em;color:#444444;&quot;">
<span style="word-wrap:break-word; border:0px; font-family:inherit; font-style:inherit; margin:0px; outline:0px; padding:0px; vertical-align:baseline; color:rgb(255,0,0)">说明：</span></p>
<p style="word-wrap:break-word; margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; font-family:&quot;font-size:15px;outline:0px;vertical-align:baseline;word-break:break-all;text-indent:2em;color:#444444;&quot;">
<span style="word-wrap:break-word; border:0px; font-family:inherit; font-style:inherit; margin:0px; outline:0px; padding:0px; vertical-align:baseline">apps</span>：json结构，apps是一个数组，每一个数组成员就是对应一个pm2中运行的应用</p>
<p style="word-wrap:break-word; margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; font-family:&quot;font-size:15px;outline:0px;vertical-align:baseline;word-break:break-all;text-indent:2em;color:#444444;&quot;">
<span style="word-wrap:break-word; border:0px; font-family:inherit; font-style:inherit; margin:0px; outline:0px; padding:0px; vertical-align:baseline">name</span>：应用程序的名称</p>
<p style="word-wrap:break-word; margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; font-family:&quot;font-size:15px;outline:0px;vertical-align:baseline;word-break:break-all;text-indent:2em;color:#444444;&quot;">
<span style="word-wrap:break-word; border:0px; font-family:inherit; font-style:inherit; margin:0px; outline:0px; padding:0px; vertical-align:baseline">cwd</span>：应用程序所在的目录</p>
<p style="word-wrap:break-word; margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; font-family:&quot;font-size:15px;outline:0px;vertical-align:baseline;word-break:break-all;text-indent:2em;color:#444444;&quot;">
<span style="word-wrap:break-word; border:0px; font-family:inherit; font-style:inherit; margin:0px; outline:0px; padding:0px; vertical-align:baseline">script</span>：应用程序的脚本路径</p>
<p style="word-wrap:break-word; margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; font-family:&quot;font-size:15px;outline:0px;vertical-align:baseline;word-break:break-all;text-indent:2em;color:#444444;&quot;">
<span style="word-wrap:break-word; border:0px; font-family:inherit; font-style:inherit; margin:0px; outline:0px; padding:0px; vertical-align:baseline">exec_interpreter</span>：应用程序的脚本类型，这里使用的shell，默认是nodejs</p>
<p style="word-wrap:break-word; margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; font-family:&quot;font-size:15px;outline:0px;vertical-align:baseline;word-break:break-all;text-indent:2em;color:#444444;&quot;">
<span style="word-wrap:break-word; border:0px; font-family:inherit; font-style:inherit; margin:0px; outline:0px; padding:0px; vertical-align:baseline">min_uptime</span>：最小运行时间，这里设置的是60s即如果应用程序在60s内退出，pm2会认为程序异常退出，此时触发重启max_restarts设置数量</p>
<p style="word-wrap:break-word; margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; font-family:&quot;font-size:15px;outline:0px;vertical-align:baseline;word-break:break-all;text-indent:2em;color:#444444;&quot;">
<span style="word-wrap:break-word; border:0px; font-family:inherit; font-style:inherit; margin:0px; outline:0px; padding:0px; vertical-align:baseline">max_restarts</span>：设置应用程序异常退出重启的次数，默认15次（从0开始计数）</p>
<p style="word-wrap:break-word; margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; font-family:&quot;font-size:15px;outline:0px;vertical-align:baseline;word-break:break-all;text-indent:2em;color:#444444;&quot;">
<span style="word-wrap:break-word; border:0px; font-family:inherit; font-style:inherit; margin:0px; outline:0px; padding:0px; vertical-align:baseline">exec_mode</span>：应用程序启动模式，这里设置的是cluster_mode（集群），默认是fork</p>
<p style="word-wrap:break-word; margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; font-family:&quot;font-size:15px;outline:0px;vertical-align:baseline;word-break:break-all;text-indent:2em;color:#444444;&quot;">
<span style="word-wrap:break-word; border:0px; font-family:inherit; font-style:inherit; margin:0px; outline:0px; padding:0px; vertical-align:baseline">error_file</span>：自定义应用程序的错误日志文件</p>
<p style="word-wrap:break-word; margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; font-family:&quot;font-size:15px;outline:0px;vertical-align:baseline;word-break:break-all;text-indent:2em;color:#444444;&quot;">
<span style="word-wrap:break-word; border:0px; font-family:inherit; font-style:inherit; margin:0px; outline:0px; padding:0px; vertical-align:baseline">out_file</span>：自定义应用程序日志文件</p>
<p style="word-wrap:break-word; margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; font-family:&quot;font-size:15px;outline:0px;vertical-align:baseline;word-break:break-all;text-indent:2em;color:#444444;&quot;">
<span style="word-wrap:break-word; border:0px; font-family:inherit; font-style:inherit; margin:0px; outline:0px; padding:0px; vertical-align:baseline">pid_file</span>：自定义应用程序的pid文件</p>
<p style="word-wrap:break-word; margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; font-family:&quot;font-size:15px;outline:0px;vertical-align:baseline;word-break:break-all;text-indent:2em;color:#444444;&quot;">
<span style="word-wrap:break-word; border:0px; font-family:inherit; font-style:inherit; margin:0px; outline:0px; padding:0px; vertical-align:baseline">watch</span>：是否启用监控模式，默认是false。如果设置成true，当应用程序变动时，pm2会自动重载。这里也可以设置你要监控的文件。</p>
<p style="word-wrap:break-word; margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; font-family:&quot;font-size:15px;outline:0px;vertical-align:baseline;word-break:break-all;text-indent:2em;color:#444444;&quot;">
详细参数列表：见附件八</p>
<span class="directory" style="word-wrap:break-word; border-width:0px 0px 0px 5px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:solid; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(47,136,154); font-family:&quot;font-size:15px;margin:8px -21px;outline:0px;padding:0px;vertical-align:baseline;float:left;height:30px;color:#444444;&quot;"></span>
<h4 id="title-5" style="word-wrap:break-word; margin:-90px 0px 0px; padding:90px 30px 5px; border:0px; font-family:&quot;font-size:1.6rem;outline:0px;vertical-align:baseline;line-height:44.8px;color:#444444;&quot;">
<img class="ke-anchor" src="http://blog.chinaunix.net/kindeditor/themes/common/anchor.gif" alt="" style="word-wrap:break-word; border:1px dashed rgb(102,102,102); width:16px; height:16px">六、实例</h4>
<p style="word-wrap:break-word; margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; font-family:&quot;font-size:15px;outline:0px;vertical-align:baseline;word-break:break-all;text-indent:2em;color:#444444;&quot;">
已上面的test.json为例</p>
<div class="dp-highlighter" style="word-wrap:break-word; font-family:&quot;font-size:15px;background-color:#E7E5DC;width:689.578px;overflow:auto;padding:5px;margin:10px auto;position:relative;white-space:normal;border:1px dashed #CCCCCC;outline:0px;vertical-align:baseline;word-break:break-all;color:#444444;&quot;">
<div class="bar" style="word-wrap:break-word; padding:2px; border:0px; font-family:inherit; font-style:inherit; margin:0px; outline:0px; vertical-align:baseline">
</div>
<ol class="dp-py" start="1" style="word-wrap:break-word; margin:0px 0px 1px -15px; padding:2px; border:0px; list-style:none; color:rgb(102,102,102); font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline; word-break:break-all">
<li class="alt" style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; color:inherit; line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
<span class="comment" style="word-wrap:break-word; color:green; margin:0px; padding:0px; border:0px; background-color:inherit; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">#&nbsp;cat&nbsp;&gt;&nbsp;/data/wwwroot/nodejs/test.sh&nbsp;&lt;&lt;&nbsp;EOF</span></li><li style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; background-color:rgb(248,248,248); color:rgb(92,92,92); line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
<span class="comment" style="word-wrap:break-word; color:green; margin:0px; padding:0px; border:0px; background-color:inherit; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">#!/bin/bash</span></li><li class="alt" style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; color:inherit; line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
<span class="keyword" style="word-wrap:break-word; color:blue; font-weight:bold; margin:0px; padding:0px; border:0px; background-color:inherit; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">while</span>&nbsp;:</li><li style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; background-color:rgb(248,248,248); color:rgb(92,92,92); line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
do</li><li class="alt" style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; color:inherit; line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;"Test"&nbsp;&gt;&gt;&nbsp;1.log</li><li style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; background-color:rgb(248,248,248); color:rgb(92,92,92); line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
&nbsp;&nbsp;&nbsp;&nbsp;sleep&nbsp;5</li><li class="alt" style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; color:inherit; line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
done</li><li style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; background-color:rgb(248,248,248); color:rgb(92,92,92); line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
EOF</li></ol>
</div>
<div class="dp-highlighter" style="word-wrap:break-word; font-family:&quot;font-size:15px;background-color:#E7E5DC;width:689.578px;overflow:auto;padding:5px;margin:10px auto;position:relative;white-space:normal;border:1px dashed #CCCCCC;outline:0px;vertical-align:baseline;word-break:break-all;color:#444444;&quot;">
<div class="bar" style="word-wrap:break-word; padding:2px; border:0px; font-family:inherit; font-style:inherit; margin:0px; outline:0px; vertical-align:baseline">
</div>
<ol class="dp-py" start="1" style="word-wrap:break-word; margin:0px 0px 1px -15px; padding:2px; border:0px; list-style:none; color:rgb(102,102,102); font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline; word-break:break-all">
<li class="alt" style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; color:inherit; line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
<span class="comment" style="word-wrap:break-word; color:green; margin:0px; padding:0px; border:0px; background-color:inherit; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">#&nbsp;chmod&nbsp;+x&nbsp;test.sh&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#添加执行权限</span></li><li style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; background-color:rgb(248,248,248); color:rgb(92,92,92); line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
<span class="comment" style="word-wrap:break-word; color:green; margin:0px; padding:0px; border:0px; background-color:inherit; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">#&nbsp;pm2&nbsp;start&nbsp;test.json&nbsp;&nbsp;&nbsp;&nbsp;#启动，如下图：</span></li></ol>
</div>
<div align="center" style="word-wrap:break-word; border:0px; font-family:&quot;font-size:15px;margin:0px;outline:0px;padding:0px;vertical-align:baseline;color:#444444;&quot;">
<img title="" src="https://blog.linuxeye.com/wp-content/uploads/2016/01/pm2_example_start.png" alt="" style="word-wrap:break-word; border:0px; max-width:100%; font-family:inherit; font-style:inherit; margin:0px; outline:0px; padding:0px; vertical-align:middle; height:auto; display:block"></div>
<div class="dp-highlighter" style="word-wrap:break-word; font-family:&quot;font-size:15px;background-color:#E7E5DC;width:689.578px;overflow:auto;padding:5px;margin:10px auto;position:relative;white-space:normal;border:1px dashed #CCCCCC;outline:0px;vertical-align:baseline;word-break:break-all;color:#444444;&quot;">
<div class="bar" style="word-wrap:break-word; padding:2px; border:0px; font-family:inherit; font-style:inherit; margin:0px; outline:0px; vertical-align:baseline">
</div>
<ol class="dp-py" start="1" style="word-wrap:break-word; margin:0px 0px 1px -15px; padding:2px; border:0px; list-style:none; color:rgb(102,102,102); font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline; word-break:break-all">
<li class="alt" style="word-wrap:break-word; margin:0px 35px 0px 50px; padding:0px 0px 0px 10px; border-width:0px 0px 0px 1px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:dashed; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(204,204,204); list-style:decimal; color:inherit; line-height:18px; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">
<span class="comment" style="word-wrap:break-word; color:green; margin:0px; padding:0px; border:0px; background-color:inherit; font-family:inherit; font-style:inherit; outline:0px; vertical-align:baseline">#&nbsp;pm2&nbsp;list&nbsp;&nbsp;&nbsp;&nbsp;#查看pm2进程，如下图：<br style="word-wrap:break-word">
</span></li><li style="word-wrap:break-word"></li></ol>
</div>
<div align="center" style="word-wrap:break-word; border:0px; font-family:&quot;font-size:15px;margin:0px;outline:0px;padding:0px;vertical-align:baseline;color:#444444;&quot;">
</div>
<p></p>
<span style="font-family:&quot;sans serif&quot;,tahoma,verdana,helvetica; font-size:16px">​</span>
                                    </div>
                                                <div class="more-toolbox">
                <div class="left-toolbox">
                    <ul class="toolbox-list">
                        
                        