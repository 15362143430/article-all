# 1. 基于Nodejs技术的科普推广系统 API 接口文档
## 1.1. API V1 接口说明

- 接口基准地址：`http://47.100.137.31/blog_end_p/public/index.php/`
- 服务端已开启 CORS 跨域支持
- API V1 认证统一使用 Token 认证
- 需要授权的 API ，必须在请求头中使用 `Authorization` 字段提供 `token` 令牌
- 使用 HTTP Status Code 标识状态
- 数据返回格式统一使用 JSON

### 1.1.1. 支持的请求方法

- GET（SELECT）：从服务器取出资源（一项或多项）。
- POST（CREATE）：在服务器新建一个资源。
- PUT（UPDATE）：在服务器更新资源（客户端提供改变后的完整资源）。
- PATCH（UPDATE）：在服务器更新资源（客户端提供改变的属性）。
- DELETE（DELETE）：从服务器删除资源。
- HEAD：获取资源的元数据。
- OPTIONS：获取信息，关于资源的哪些属性是客户端可以改变的。

### 1.1.2. 通用返回状态说明

| *状态码* | *含义*                | *说明*                                              |
| -------- | --------------------- | --------------------------------------------------- |
| 200      | OK                    | 请求成功                                            |
| 201      | CREATED               | 创建成功                                            |
| 204      | DELETED               | 删除成功                                            |
| 400      | BAD REQUEST           | 请求的地址不存在或者包含不支持的参数                |
| 401      | UNAUTHORIZED          | 未授权                                              |
| 403      | FORBIDDEN             | 被禁止访问                                          |
| 404      | NOT FOUND             | 请求的资源不存在                                    |
| 422      | Unprocesable entity   | [POST/PUT/PATCH] 当创建一个对象时，发生一个验证错误 |
| 500      | INTERNAL SERVER ERROR | 内部错误                                            |
|          |                       |                                                     |

------

## 1.2. 文章

### 1.2.1. 前端页面获取文章列表接口

- 请求路径：articles/:type
- 请求方法：get
- 请求参数

| 参数名   | 参数类型 | 参数说明 | 备注     |
| -------- | -------- | -------- | -------- |
| type     | string | 文章类型  | 如果为空则返回所有文章，如果不为空则返回对应类型的文章列表 |

- 响应参数

| 参数名   | 参数说明    | 备注            |
| -------- | ----------- | --------------- |
| id       | 文章 ID     |                 |
| title    | 文章 标题   |                 |
| body     | 文章 梗概   |                 |
| addtime  | 文章 创建时间|                 |
| type     | 文章 类型   |                 |
| img_path | 文章 封面路径   |                 |
| md_path  | 文章 内容路径   |                 |
| author   | 文章 搬运工 |                  |

- 响应数据

```json
{
    "data": [
        {"id": 1,
        "title": "CSS实现垂直居中的常用方法",
        "body": "在前端开发过程中，盒子居中是常常用到的。其中 ，居中又可以分为水平居中和垂直居中。水平居中是比较容易的，直接设置元素的margin: 0 auto就可以实现。但是垂直居中相对来说是比较复杂一些的。下面我们一起来讨论一下实现垂直居中的方法。首先，定义一个需要垂直居中的div元素，他的宽度和高度均为300px，背景色为橙色。代码如下： ",
        "addtime": "2019-09-01 12:35:56",
        "type": "CSS",
        "author": "林三心"},
        {"id": 2,
        "title": "CSS实现垂直居中的常用方法",
        "body": "在前端开发过程中，盒子居中是常常用到的。其中 ，居中又可以分为水平居中和垂直居中。水平居中是比较容易的，直接设置元素的margin: 0 auto就可以实现。但是垂直居中相对来说是比较复杂一些的。下面我们一起来讨论一下实现垂直居中的方法。首先，定义一个需要垂直居中的div元素，他的宽度和高度均为300px，背景色为橙色。代码如下： ",
        "addtime": "2019-09-01 12:35:56",
        "type": "CSS",
        "author": "林三心"},
    ]
    "meta": {
        "msg": "获取文章列表成功",
        "status": 200
    }
}
```

### 1.2.2. 获取文章详情接口

- 请求路径：article/:id
- 请求方法：get
- 请求参数

| 参数名   | 参数类型 | 参数说明 | 备注     |
| -------- | -------- | -------- | -------- |
| id       | number   | 文章 ID  | 不能为空 |

- 响应参数

| 参数名   | 参数说明    | 备注            |
| -------- | ----------- | --------------- |
| id       | 文章 ID     |                 |
| title    | 文章 标题   |                 |
| body     | 文章 梗概   |                 |
| addtime  | 文章 创建时间|                 |
| type     | 文章 类型   |                 |
| img_path | 文章 封面路径   |                 |
| md_path  | 文章 内容路径   |                 |
| author   | 文章 搬运工 |                  |

- 响应数据

```json
{
    "data":{"id": 1,
        "title": "CSS实现垂直居中的常用方法",
        "body": "在前端开发过程中，盒子居中是常常用到的。其中 ，居中又可以分为水平居中和垂直居中。水平居中是比较容易的，直接设置元素的margin: 0 auto就可以实现。但是垂直居中相对来说是比较复杂一些的。下面我们一起来讨论一下实现垂直居中的方法。首先，定义一个需要垂直居中的div元素，他的宽度和高度均为300px，背景色为橙色。代码如下： ",
        "addtime": "2019-09-01 12:35:56",
        "type": "CSS",
        "author": "林三心",
        "path": "xxx/xxx/xxx/"
        },
    "meta": {
        "msg": "获取文章详情成功",
        "status": 200
    }
}
```

### 1.2.3. 获取文章内容接口

- 请求路径：articlemd/:id
- 请求方法：get
- 请求参数

| 参数名   | 参数类型 | 参数说明 | 备注     |
| -------- | -------- | -------- | -------- |
| id       | number   | 文章 ID  | 不能为空 |

- 响应参数

| 参数名   | 参数说明    | 备注            |
| -------- | ----------- | --------------- |
| data     | 文章 内容     |                 |

- 响应数据

```json
{
    "data": "<html>萨达南时代是滴啊上帝阿斯蒂撒旦是内地年湿地您萨达你啊实打实大师的你妈说地南叔的那您</html>",
    "meta": {
        "msg": "获取文章内容成功",
        "status": 200
    }
}
```

## 1.3. 视频

### 1.3.1. 前端页面获取视频列表接口

- 请求路径：videos
- 请求方法：get
- 请求参数

| 参数名   | 参数类型 | 参数说明 | 备注     |
| -------- | -------- | -------- | -------- |
| 无     |  |   |  |

- 响应参数

| 参数名   | 参数说明    | 备注            |
| -------- | ----------- | --------------- |
| id       | 视频 ID     |                 |
| title    | 视频 标题   |                 |
| imgsrc   | 视频 封面   |                 |
| videosrc | 视频 连接   |                 |
| type     | 视频 类型   |                 |
| author   | 视频 搬运工 |                  |
| addtime  | 视频 添加时间 |                  |

- 响应数据

```json
{
    "data": [
        {"id": 1,
        "title": "Node+Express+mongoDB修改产品和PUT请求",
        "imgsrc": "xxx/xxx/xxx/",
        "videosrc":"xxx/xxx/xxx/",
        "addtime": "2019-09-01 12:35:56",
        "type": "CSS",
        "author": "林三心"},
        {"id": 1,
        "title": "Node+Express+mongoDB修改产品和PUT请求",
        "imgsrc": "xxx/xxx/xxx/",
        "videosrc":"xxx/xxx/xxx/",
        "addtime": "2019-09-01 12:35:56",
        "type": "CSS",
        "author": "林三心"}
    ]
    "meta": {
        "msg": "获取视频列表成功",
        "status": 200
    }
}
```

### 1.3.2. 获取视频详情接口

- 请求路径：videos
- 请求方法：get
- 请求参数

| 参数名   | 参数类型 | 参数说明 | 备注     |
| -------- | -------- | -------- | -------- |
| id       | number   | 视频 ID  | 不能为空 |

- 响应参数

| 参数名   | 参数说明    | 备注            |
| -------- | ----------- | --------------- |
| id       | 视频 ID     |                 |
| title    | 视频 标题   |                 |
| imgsrc   | 视频 封面   |                 |
| videosrc | 视频 连接   |                 |
| type     | 视频 类型   |                 |
| author   | 视频 搬运工 |                  |
| addtime  | 视频 添加时间 |                  |

- 响应数据

```json
{
    "data":{"id": 1,
        "title": "Node+Express+mongoDB修改产品和PUT请求",
        "imgsrc": "xxx/xxx/xxx/",
        "videosrc":"xxx/xxx/xxx/",
        "addtime": "2019-09-01 12:35:56",
        "type": "CSS",
        "author": "林三心"}，
    "meta": {
        "msg": "获取视频列表成功",
        "status": 200
    }
}
```

### 1.3.3. 获取视频相对应的推荐接口

- 请求路径：videos
- 请求方法：get
- 请求参数

| 参数名   | 参数类型 | 参数说明 | 备注     |
| -------- | -------- | -------- | -------- |
| type     | string   | 视频 类型 | 不能为空 |

- 响应参数

| 参数名   | 参数说明    | 备注            |
| -------- | ----------- | --------------- |
| id       | 视频 ID     |                 |
| title    | 视频 标题   |                 |
| imgsrc   | 视频 封面   |                 |
| videosrc | 视频 连接   |                 |
| type     | 视频 类型   |                 |
| author   | 视频 搬运工 |                  |
| addtime  | 视频 添加时间 |                  |

- 响应数据

```json
{
    "data":[
        {"id": 1,
        "title": "Node+Express+mongoDB修改产品和PUT请求",
        "imgsrc": "xxx/xxx/xxx/",
        "videosrc":"xxx/xxx/xxx/",
        "addtime": "2019-09-01 12:35:56",
        "type": "CSS",
        "author": "林三心"},
        {"id": 1,
        "title": "Node+Express+mongoDB修改产品和PUT请求",
        "imgsrc": "xxx/xxx/xxx/",
        "videosrc":"xxx/xxx/xxx/",
        "addtime": "2019-09-01 12:35:56",
        "type": "CSS",
        "author": "林三心"}
    ]
    "meta": {
        "msg": "获取视频列表成功",
        "status": 200
    }
}
```

